require({cache:{"riasd/gridMetas":function(){define(["rias/riasBase","dojo/i18n!riasd/nls/gridMetasI18n"],function(b,a){var e;try{e={"riasw.grid.DGrid":{category:"widget",isDesktop:!0,isMobile:!0,isTesting:!0,isPaletteItem:!0,iconClass48:"riaswGridIcon48",iconClass16:"riaswGridIcon16",caption:a["riasw.grid.DGrid"].caption,description:a["riasw.grid.DGrid"].description}}}catch(d){console.error(d)}return e})},"riasd/editorMetas":function(){define(["rias/riasBase","dojo/i18n!riasd/nls/editorMetasI18n"],function(b,a){var e;try{e={"riasw.editor.RichText":{category:"widget",isDesktop:!0,isMobile:!1,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswEditorIcon48",iconClass16:"riaswEditorIcon16",caption:a["riasw.editor.RichText"].caption,description:a["riasw.editor.RichText"].description},"riasw.editor.HTMLEditor":{category:"widget",isDesktop:!0,isMobile:!1,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswHTMLEditorIcon48",iconClass16:"riaswHTMLEditorIcon16",caption:a["riasw.editor.HTMLEditor"].caption,description:a["riasw.editor.HTMLEditor"].description},"riasw.editor.CodeEditor":{category:["widget"],isDesktop:!0,isMobile:!1,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswCodeEditorIcon48",iconClass16:"riaswCodeEditorIcon16",caption:a["riasw.editor.CodeEditor"].caption,description:a["riasw.editor.CodeEditor"].description}}}catch(d){console.error(d)}return e})},"riasd/sys/OutlineTree":function(){define(["riasw/riaswBase","riasw/tree/Tree","riasw/tree/TreeModel","riasw/store/ObjectStore","riasw/store/MemoryStore"],function(b,a,e,d,p){var q=function(a,d){var e=a._riaswType||a.type||"",k=a.caption||a.label||a._riaswIdInModule||a.id||"",n=a._riaswIdInModule||"",m,p,u;m=a?a===d&&b.isRiaswModule(a)?a._riaswModuleMeta:a._riaswParams:{};u=0;for(p in m)if(m.hasOwnProperty(p)&&b.isFunction(m[p])){u++;break}u=u?"\x3cspan class\x3d'riasdOutlineTreeItemFunc'\x3e(f)\x3c/span\x3e":"";e="("+e.substring(e.lastIndexOf(".")+1)+")";a._riaswType&&(e="DefaultError"===a._riaswType?"\x3cspan class\x3d'riasdOutlineTreeItemError'\x3e"+e+"\x3c/span\x3e":"\x3cspan class\x3d'riasdOutlineTreeItemType'\x3e"+e+"\x3c/span\x3e");n&&(n="\x3cspan class\x3d'riasdOutlineTreeItemId'\x3e"+n+"\x3c/span\x3e");return u+n+"\x3cspan class\x3d'riasdOutlineTreeItemLabel'\x3e["+k+"]\x3c/span\x3e"+e},t=b.declare("riasw.sys.OutlineStore",d,{constructor:function(b){b.idProperty||(b.idProperty="id");this.objectStore=new p(b)}}),z=b.declare("riasw.sys.OutlineTreeModel",e,{mayHaveChildren:function(a){var d=null;return a===this.root||b.some(this.childrenAttrs,function(e){d=this.store.getValue(a,e);return b.isArray(d)?0<d.length:b.isString(d)?0<b.toInt(d,0)||"true"===d.toLowerCase():b.isNumber(d)?0<d:b.isBoolean(d)?d:this.store.isItem(d)?(d=this.store.getValues(a,e),b.isArray(d)?0<d.length:!1):!1},this)}});a=b.declare("riasw.sys.OutlineTree",[a],{baseClass:"riaswTree riasdOutlineTree",rootWidget:null,currentWidget:void 0,_cutWidget:void 0,autoFocusWhenSelectNode:!0,autoExpand:!1,showRoot:!1,noDnd:!0,childrenAttr:["children"],postMixInProperties:function(){this.inherited(arguments);var b=new t({ownerRiasw:this,idProperty:"id",labelProperty:"label"});this.model=new z({ownerRiasw:this,rootId:"$root$",rootLabel:"ROOT",labelType:"html",store:b})},fetchWidgets:function(a){function d(a,k){if(a){b.isRiasObject(a)||console.error("not a riasObject: ",a);var n=b.getRiaswMeta(a),n={id:a.id,r:e,isLoaded:!0,label:q(a,e.rootWidget),parentid:a.getOwnerRiasw()?a.getOwnerRiasw().id:void 0,leaf:!0,iconClass:n&&n.iconClass16?n.iconClass16:void 0,__riasrWidget:a,children:[]};!k&&b.isRiaswModule(a)||b.forEach(k?a._riaswElements||[]:b.isRiaswModule(a)?[]:a._riaswElements||[],function(b){(b=d(b.__riasrWidget))&&n.children.push(b)});return n}}var e=this,k=e.model.store.objectStore;a=(a=a?a:this.rootWidget)?d(a,1):void 0;k.setData(a?[a]:[]);return k.data},load:function(a,d){this.rootWidget=b.by(a);this.fetchWidgets(this.rootWidget);this.model.root[this.model.childrenAttrs[0]]=void 0;return this.inherited(arguments,[d])}});a._riasdMeta={visual:!0};return a})},"riasd/treeMetas":function(){define(["rias/riasBase","dojo/i18n!riasd/nls/treeMetasI18n"],function(b,a){var e;try{e={"riasw.tree.TreeModel":{category:"widget",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!1,iconClass48:"riaswTreeModelIcon48",iconClass16:"riaswTreeModelIcon16",caption:a["riasw.tree.TreeModel"].caption,description:a["riasw.tree.TreeModel"].description},"riasw.tree.Tree":{category:"widget",isDesktop:!0,isMobile:!1,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswTreeIcon48",iconClass16:"riaswTreeIcon16",caption:a["riasw.tree.Tree"].caption,description:a["riasw.tree.Tree"].description}}}catch(d){console.error(d)}return e})},"riasd/sysMetas":function(){define(["rias/riasBase","dojo/i18n!riasd/nls/sysMetasI18n"],function(b,a){var e;try{e={"riasw.sys.DefaultError":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!1,iconClass48:"riaswPaneIcon48",iconClass16:"riaswPaneIcon16",visual:!0,caption:a["riasw.sys.DefaultError"].caption,description:a["riasw.sys.DefaultError"].description},"riasw.sys._ModuleMixin":{riaswType:["riasw.sys._ModuleMixin"],requires:["riasw/sys/_ModuleMixin"],property:{moduleMeta:{datatype:["String","Object"],defaultValue:"",title:"Module's Metadata"}},event:{beforeParse:{datatype:"function",title:"beforeParse"},afterParse:{datatype:"function",title:"afterParse"}}},"riasw.sys.Module":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswModuleIcon48",iconClass16:"riaswModuleIcon16",visual:!0,caption:a["riasw.sys.Module"].caption,description:a["riasw.sys.Module"].description},"riasw.sys.Dialog":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswDialogIcon48",iconClass16:"riaswDialogIcon16",caption:a["riasw.sys.Dialog"].caption,description:a["riasw.sys.Dialog"].description},"riasw.sys.Scene":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswSceneIcon48",iconClass16:"riaswSceneIcon16",caption:a["riasw.sys.Scene"].caption,description:a["riasw.sys.Scene"].description},"riasw.sys.View":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswViewIcon48",iconClass16:"riaswViewIcon16",caption:a["riasw.sys.View"].caption,description:a["riasw.sys.View"].description},"riasw.sys.Form":{category:["sys","form"],isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswFormIcon48",iconClass16:"riaswFormIcon16",caption:a["riasw.sys.Form"].caption,description:a["riasw.sys.Form"].description},"riasw.sys.Logo":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswLogoIcon48",iconClass16:"riaswLogoIcon16",caption:a["riasw.sys.Logo"].caption,description:a["riasw.sys.Logo"].description},"riasw.sys.Label":{category:["sys","form"],isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswLabelIcon48",iconClass16:"riaswLabelIcon16",caption:a["riasw.sys.Label"].caption,description:a["riasw.sys.Label"].description},"riasw.sys.Tag":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswTagIcon48",iconClass16:"riaswTagIcon16",caption:a["riasw.sys.Tag"].caption,description:a["riasw.sys.Tag"].description},"riasw.sys.ContainerTag":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswContainerTagIcon48",iconClass16:"riaswContainerTagIcon16",caption:a["riasw.sys.ContainerTag"].caption,description:a["riasw.sys.ContainerTag"].description},"riasw.sys.TimerLabel":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswTimerLabelIcon48",iconClass16:"riaswTimerLabelIcon16",caption:a["riasw.sys.TimerLabel"].caption,description:a["riasw.sys.TimerLabel"].description},"riasw.sys.Tooltip":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswTooltipIcon48",iconClass16:"riaswTooltipIcon16",caption:a["riasw.sys.Tooltip"].caption,description:a["riasw.sys.Tooltip"].description},"riasw.sys.ToolButton":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswToolButtonIcon48",iconClass16:"riaswToolButtonIcon16",caption:a["riasw.sys.ToolButton"].caption,description:a["riasw.sys.ToolButton"].description},"riasw.sys.Toolbar":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswToolbarIcon48",iconClass16:"riaswToolbarIcon16",caption:a["riasw.sys.Toolbar"].caption,description:a["riasw.sys.Toolbar"].description},"riasw.sys.ToolbarSeparator":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswToolbarSeparatorIcon48",iconClass16:"riaswToolbarSeparatorIcon16",caption:a["riasw.sys.ToolbarSeparator"].caption,description:a["riasw.sys.ToolbarSeparator"].description},"riasw.sys.ToolbarLineBreak":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswToolbarLineBreakIcon48",iconClass16:"riaswToolbarLineBreakIcon16",caption:a["riasw.sys.ToolbarLineBreak"].caption,description:a["riasw.sys.ToolbarLineBreak"].description},"riasw.sys.Menu":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswMenuIcon48",iconClass16:"riaswMenuIcon16",caption:a["riasw.sys.Menu"].caption,description:a["riasw.sys.Menu"].description},"riasw.sys.DropDownMenu":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswMenuIcon48",iconClass16:"riaswMenuIcon16",caption:a["riasw.sys.DropDownMenu"].caption,description:a["riasw.sys.DropDownMenu"].description},"riasw.sys.MenuBar":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswMenuBarIcon48",iconClass16:"riaswMenuBarIcon16",caption:a["riasw.sys.MenuBar"].caption,description:a["riasw.sys.MenuBar"].description},"riasw.sys.MenuSeparator":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswMenuSeparatorIcon48",iconClass16:"riaswMenuSeparatorIcon16",caption:a["riasw.sys.MenuSeparator"].caption,description:a["riasw.sys.MenuSeparator"].description},"riasw.sys.MenuItem":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswMenuItemIcon48",iconClass16:"riaswMenuItemIcon16",caption:a["riasw.sys.MenuItem"].caption,description:a["riasw.sys.MenuItem"].description},"riasw.sys.PopupMenuItem":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswPopupMenuItemIcon48",iconClass16:"riaswPopupMenuItemIcon16",caption:a["riasw.sys.PopupMenuItem"].caption,description:a["riasw.sys.PopupMenuItem"].description},"riasw.sys.CheckMenuItem":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswCheckMenuItemIcon48",iconClass16:"riaswCheckMenuItemIcon16",caption:a["riasw.sys.CheckMenuItem"].caption,description:a["riasw.sys.CheckMenuItem"].description},"riasw.sys.RadioMenuItem":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswRadioMenuItemIcon48",iconClass16:"riaswRadioMenuItemIcon16",caption:a["riasw.sys.RadioMenuItem"].caption,description:a["riasw.sys.RadioMenuItem"].description},"riasw.sys.MenuBarItem":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswMenuBarItemIcon48",iconClass16:"riaswMenuBarItemIcon16",caption:a["riasw.sys.MenuBarItem"].caption,description:a["riasw.sys.MenuBarItem"].description},"riasw.sys.PopupMenuBarItem":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswPopupMenuBarItemIcon48",iconClass16:"riaswPopupMenuBarItemIcon16",caption:a["riasw.sys.PopupMenuBarItem"].caption,description:a["riasw.sys.PopupMenuBarItem"].description},"riasw.sys.OutlineTree":{riaswType:["riasw.sys.OutlineTree"],requires:["riasd/sys/OutlineTree"],category:["sys","riasd"],isDesktop:!0,isMobile:!1,isTesting:!1,isPaletteItem:!1,iconClass48:"riaswOutlineTreeIcon48",iconClass16:"riaswOutlineTreeIcon16",caption:a["riasw.sys.OutlineTree"].caption,description:a["riasw.sys.OutlineTree"].description},"riasw.sys.WidgetPalette":{riaswType:["riasw.sys.WidgetPalette"],requires:["riasd/sys/WidgetPalette"],category:["sys","riasd"],isDesktop:!0,isMobile:!1,isTesting:!1,isPaletteItem:!1,iconClass48:"riaswWidgetPaletteIcon48",iconClass16:"riaswWidgetPaletteIcon16",caption:a["riasw.sys.WidgetPalette"].caption,description:a["riasw.sys.WidgetPalette"].description}}}catch(d){console.error(d)}return e})},"riasd/module/visualEditor":function(){define("riasw/riaswBase riasd/main dojo/i18n!riasd/nls/riasdI18n riasd/sys/OutlineTree riasd/sys/WidgetPalette riasd/module/fileSelector riasw/layout/_PanelWidget riasw/editor/HTMLEditor riasw/sys/DefaultError riasw/sys/_Container".split(" "),function(b,a,e,d,p,q,t,z,m,u){function x(c,h,g,a){if(b.isArray(h)){var f=arguments.callee;return b.map(h,function(b){return f(c,b,g,a)})}h=b.mixinDeep({},h);delete h.id;delete h._rsfVersion;b._deleDP(h,g,a);return h}function k(c,b,g){b=x(c,b,g===c,!0);g===c?(g._riaswModuleMeta=b,delete g._riaswModuleMeta.moduleMeta):g._riaswParams=b}function n(c,h,g){g=b.isRiasObject(g)?g:void 0;var a;h=h||{};h._riaswIdInModule||(h._riaswIdInModule=b.rt.getUniqueId(b.rt._getUniqueCat(h),c));if(g&&(c=(c=g.constructor)?c._meta?c._meta.bases:void 0:void 0))for(c=c.length-1;0<=c;){c={};for(a in c)c.hasOwnProperty(a)&&"_"!==a[0]&&(h[a]=c[a]);break}return h}function y(c){var h,g;if(!c)return-1;g=(g=c.getOwnerRiasw())?g._riaswElements:[];b.isArray(g)||(g=[]);for(h=0;h<g.length;h++)if(g[h].__riasrWidget===c)return h;return-1}function A(c,h){var g=b.isArray(c)?c:[c],a,E=g.length,d,e;h=b.isArray(h)?h:[h];for(a=0;a<E;a++)if(e=g[a])for(arguments.callee(e._riaswElements,h),d=h.length-1;0<=d;d--)e[h[d]]&&delete e[h[d]];return c}function H(c,h){var g=x(c,h?b.isArray(h)?h:[h]:[],!0),a,E=g.length,d;for(a=0;a<E;a++)if(d=g[a])(d._riaswElements&&(d._riaswElements=b.hitch(this,arguments.callee)(c,d._riaswElements)),d._riaswIdInModule)?c[d._riaswIdInModule]&&(d._riaswIdInModule=b.rt.getUniqueId(b.rt._getUniqueCat(d),c)):d._riaswIdInModule=b.rt.getUniqueId(b.rt._getUniqueCat(d),c);return g}function D(c,h){c=b.isArray(c)?c:c?[c]:[];for(var g=0,a=c.length,d,e,k=[];g<a;g++)d=c[g],b.isRiaswParam(d)&&(d=d.__riasrWidget),b.isRiasObject(d)||(d=void 0,console.error("not a riasWidget: ",c[g])),d&&(e=b.is(d,m)?b.mixinDeep({},d._riaswOriginalParams):b.mixinDeep({},d._riaswParams),delete e._rsfVersion,b._deleDP(e,!1,h),b.isRiaswModule(d)||(e._riaswElements=arguments.callee(d._riaswElements,h)),e.__riasrWidget&&delete e.__riasrWidget,e._riaswElements&&1>e._riaswElements.length&&delete e._riaswElements,k.push(e));return k}var r=b.dom,w=b.max(b.theme.scrollbarWidth,b.theme.scrollbarHeight,1)+1;b.deleteRiasd=function(c,h){var g=b.isArray(c)?c:[c],a,d=g.length,e,k;h=b.isArray(h)?h:[h];for(a=0;a<d;a++)if(k=g[a])for(arguments.callee(k._riaswElements,h),e=h.length-1;0<=e;e--)k[h[e]]&&delete k[h[e]]};var F={_riaswVersion:"0.7",caption:"\u589e\u52a0\u63a7\u4ef6",iconClass:"iconListIcon",initFocusedChild:"module.edt_name",afterLoadedAll:function(c){c&&(this.edt_name.silentSetValue(this._get("submitValue")),this.palette.loadPalette())},_riaswElements:[{_riaswType:"riasw.layout.Panel",_riaswIdInModule:"main",region:"center",caption:"\u63a7\u4ef6\u7ba1\u7406\u5668",design:"sidebar",style:{padding:"0px"},_riaswElements:[{_riaswType:"riasw.layout.Panel",_riaswIdInModule:"_editWidgets",region:"top",style:{height:"3em",padding:"0"},_riaswElements:[{_riaswType:"riasw.form.TextBox",_riaswIdInModule:"edt_name",label:"\u63a7\u4ef6\u540d\uff1a",labelWidth:"4em",name:"val",region:"center",showLabel:!0,style:{"line-height":"2em",height:"2em",padding:"0.5em"},onFocus:function(){this.select()},onKeyDown:function(c){var h=this.ownerModule();c.keyCode===b.keys.ENTER&&b.trim(this.get("value"))&&h.submit(c)},onChange:function(c){c=this.ownerModule();c.contentLoaded&&c.set("submitValue",this.get("value"))}}]},{_riaswType:p,_riaswIdInModule:"palette",persist:!1,region:"center",onSelect:function(c){var b=this.ownerModule();b.isDestroyed(!0)||(c.selected?b.edt_name.set("value",c.riaswType):b.edt_name.set("value",""))},onDblClick:function(c){var b=this.ownerModule();0<this.selectedItems.length&&b.submit(c)}}]}]},M={_riaswVersion:"0.7",persist:!0,design:"sidebar",caption:e.veWidget,_checkCodeTextDelay:300,_checkCodeTextHandle:{},_setReadOnlyAttr:function(c){this.readOnly!==c&&(this.readOnly=!!c,this._setBtnState())},afterParse:function(c){var h=this;h.own(b.subscribe("/riasd/currentModuleSaved",function(c){c.module===h.currentModule&&h._refreshEdts(h.currentWidget)}))},afterLoadedAllAndShown:function(){this.setCurrentWidget(this.currentWidget)},beforeDestroyed:function(){b.forEach(this._checkCodeTextHandle,function(c){c.remove()});this._checkCodeTextHandle=void 0},_getRiasdMeta:function(c){return c?c.constructor:void 0},_setBtnState:function(){var c=this.readOnly,b=this.currentWidget,g=this.currentModule,a=this.edtRiaswIdInModule.get("value");this.isDestroyed(!0)||(this.btnSave.set("disabled",c||!g||!b||(b===g||b._riaswIdInModule===a)&&!this.get("_isModified")),this.edtParam.set("readOnly",c||!g||!b),this.edtFunc.set("readOnly",c||!g||!b))},_refreshEdts:function(c){function h(c,b){c.setText(b,1);g&&(c._currentClientArea[g.id]&&c.scrollView(c._currentClientArea[g.id].x,c._currentClientArea[g.id].y),0<=c._currentCaretOffset[g.id]&&c.setCaretOffset(c._currentCaretOffset[g.id],!1))}var g=c||this.currentWidget,a;c=g?b.mixinDeep({},g===this.currentModule?g._riaswModuleMeta:g._riaswParams):{};var d={},e;this.edtRiaswIdInModule.set("value",g?g===this.currentModule?"preview":g._riaswIdInModule?g._riaswIdInModule:"":"");this.edtParam.setText("{}",1);this.edtFunc.setText("{}",1);e=(e=this._getRiasdMeta(g))?e.riasdDoc||{}:{};h(this.edtRtObj,this._getAttr(g));if(c){delete c.id;delete c.ownerRiasw;delete c._riaswType;delete c._riaswIdInModule;delete c._rsfVersion;b._deleDP(c,!1,!1,!1);for(a in c)c.hasOwnProperty(a)&&b.isFunction(c[a])&&(d[a]=c[a],delete c[a]);try{c=b.mixinDeep_ord({},c),h(this.edtParam,b.toJson(c,{prettyPrint:!0,includeFunc:!0,includeFuncHeader:!0,loopToString:!1,errorToString:!0,simpleObject:!0,ignoreProperty_:!1})),e=b.toJson(d,{prettyPrint:!0,includeFunc:!0,includeFuncHeader:!0,loopToString:!1,errorToString:!0,simpleObject:!0,ignoreProperty_:!1}),h(this.edtFunc,e)}catch(C){console.error(C)}}this._setIsModified()},saveCurrentEdtsState:function(c){function b(c){c._currentCaretOffset[a.id]=c.getCaretOffset();c._currentClientArea[a.id]=c.getClientArea()}var a=c||this.currentWidget;a&&(b(this.edtParam),b(this.edtFunc),b(this.edtRtObj))},setCurrentWidget:function(c){var b=this.currentWidget;this.currentWidget=c;this.contentLoaded&&(c!==b&&this._refreshEdts(c),this._setBtnState())},_setIsModified:function(c){void 0===c?this.set("_isModified",this.edtParam.isDirty()||this.edtFunc.isDirty()):this.set("_isModified",c);this._setBtnState();this.riasdCurrentVe.ol._setBtnState()},_checkCodeText:function(c,h,a,f){f=f||"_checkCodeText";this._checkCodeTextHandle[f]=b._debounce(f,function(g){if(this._canDoDom())try{delete this._checkCodeTextHandle[f],b.fromJson(a,!0),b.hideTooltip(g)}catch(C){var d=c.getLineAtOffset(h.start)+1;a=a.substring(0,h.start+h.addedCharCount);a=b.lastString(a,"\n");b.showTooltip("\u7b2c "+d+"\u884c: "+a+"\x3cbr /\x3e"+C,g)}},this,this._checkCodeTextDelay||300)(this.btnSave)},_actSubmitChange:function(c){var a=this,g=a.currentWidget,f=a.currentModule,d=a.edtRiaswIdInModule.get("value"),e;if(g&&f){g._riasdParams={params:a.edtParam.getText(),methods:a.edtFunc.getText()};if(g._riasdParams.params)try{e=b.mixin({id:"",_riaswType:"",_riaswIdInModule:""},b.fromJson(g._riasdParams.params))}catch(C){b.error("error Params.\x3cbr /\x3e"+C,a,a.btnSave);return}else e={};if(g._riasdParams.methods)try{b.mixin(e,b.fromJson(g._riasdParams.methods))}catch(C){b.error("error Method.\x3cbr /\x3e"+C.valueOf(),a,a.btnSave);return}d||g===f||(d=b.rt.getUniqueId(b.rt._getUniqueCat(g),f));d&&f[d]&&f[d]!==g?b.error("_riaswIdInModule \u6709\u9519\u6216\u5df2\u5b58\u5728.",a,a.edtRiaswIdInModule):(e._riaswType=g._riaswType,g!==f?(e.id=f.id+"_"+d,e._riaswIdInModule=d):(delete e.id,delete e._riaswIdInModule),a.saveCurrentEdtsState(),a.set("_isModified",!1),g!==f&&g._riaswIdInModule!==d||a.edtParam.isDirty()||a.edtFunc.isDirty()?b.publish("/riasd/currentWidgetModified",{sender:a.btnSave,widget:g,params:e,reload:g!==f&&g._riaswIdInModule!==d||a.edtFunc.isDirty(),callback:function(){a.riasdCurrentVe.previewDialog.set("needResizeContent",!0);a.riasdCurrentVe.previewDialog.resize();b.isFunction(c)&&c()}}):b.isFunction(c)&&c())}else b.error("no currentWidget/currentModule.",a,a.btnSave)},_getStyle:function(c){var a,g,f,d;if(b.isRiasw(c)){g=c.domNode.style;a={cssText:g.cssText,origin:{},computed:{}};d=0;for(f=g.length;d<f;d++)a.origin[g[d]]=g[g[d]];a.origin=b.mixin_ord({},a.origin);g=r.getComputedStyle(c.domNode);d=0;for(f=g.length;d<f;d++)c=g[d],b.startWith(c,"-webkit-")||b.startWith(c,"Moz")||(a.computed[c]=g[c]);a.computed=b.mixin_ord({},a.computed);return b.toJson(a,{prettyPrint:!0,includeFunc:!1,loopToString:!0,errorToString:!0,simpleObject:!0,ignoreProperty_:!0})}return""},_getAttr:function(c){var a,g,f,d,e,k,n=c?c.getOwnerRiasw():void 0,p=c?c.constructor:void 0,y=[],m="constructor declaredClass getInherited attributeMap create postMixInProperties buildRendering postCreate postscript uninitialize unsubscribe dojoAttachEvent dojoAttachPoint params inherited templateString templatePath ownerDocument ownerDocumentBody ChildWidgetProperties".split(" ");if(p){a={};if(g=p._meta?p._meta.bases:void 0)for(d=g.length-1;0<=d;--d)if(f=g[d],f=f.ChildWidgetProperties){a.ChildWidgetProperties={};for(e in f)f.hasOwnProperty(e)&&(k=f[e],a.ChildWidgetProperties[e]=k,y.push(e));a.ChildWidgetProperties=b.mixin_ord({},a.ChildWidgetProperties)}if(n&&c!==this.currentModule&&(g=(g=n.constructor)?g._meta?g._meta.bases:void 0:void 0))for(d=g.length-1;0<=d;--d)if(f=g[d],f=f.ChildWidgetProperties){a.WhenChildProperties={};for(e in f)f.hasOwnProperty(e)&&(k=f[e],a.WhenChildProperties[e]=k,y.push(e));a.WhenChildProperties=b.mixin_ord({},a.WhenChildProperties)}a.attachNode={};a.setXXXAttr={};a.attr={};a.inheritedAttr={};a.on={};a.method={};a.inheritedMethod={};b.forEach(p._setterAttrs,function(h){g="_set"+b.upperCaseFirst(h)+"Attr";!b.contains(m,h)&&b.isFunction(c[g])&&(a.setXXXAttr[h]=c[h],y.push(h))});a.setXXXAttr=b.mixin_ord({},a.setXXXAttr);for(e in p._onMap)p._onMap.hasOwnProperty(e)&&(k=p._onMap[e],"on"!==k&&b.isFunction(c[k])&&(a.on[k]=c[k],y.push(k)));for(e in c)"_"===e.charAt(0)||b.contains(m,e)||b.contains(y,e)||(k=c[e],g=c.hasOwnProperty(e),b.startWith(e,"on")&&b.isFunction(k)?a.on[e]=k:b.isFunction(k)?g?a.method[e]=k:a.inheritedMethod[e]=k:b.isDomNode(k)?a.attachNode[e]=k:g?a.attr[e]=k:a.inheritedAttr[e]=k);a.on=b.mixin_ord({},a.on);a.attr=b.mixin_ord({},a.attr);a.method=b.mixin_ord({},a.method);a.attachNode=b.mixin_ord({},a.attachNode);a.inheritedAttr=b.mixin_ord({},a.inheritedAttr);a.inheritedMethod=b.mixin_ord({},a.inheritedMethod);return b.toJson(a,{prettyPrint:!0,includeFunc:!1,includeFuncHeader:!0,loopToString:!0,errorToString:!0,simpleObject:!0,ignoreProperty_:!0})}return""},_actHelp:function(){},_riaswElements:[{_riaswType:"riasw.layout.Panel",_riaswIdInModule:"mainTop",region:"top",design:"sidebar",style:{height:"2.5em",padding:"0px"},_riaswElements:[{_riaswType:"riasw.layout.Panel",_riaswIdInModule:"btns",region:"left",layoutPriority:0,style:{padding:"0px"},_riaswElements:[{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnSave",disabled:!0,showLabel:!0,label:b.i18n.action.save,tooltip:b.i18n.action.save,iconClass:"saveIcon",onClick:function(c){this.ownerModule()._actSubmitChange()}}]},{_riaswType:"riasw.layout.TablePanel",_riaswIdInModule:"edts",name:"edts",region:"center",layoutPriority:1,cols:1,colWidths:["100%"],childParams:{labelWidth:"6em",showLabel:!0},childStyle:{"line-height":"2em",height:"2em",width:"100%"},cellStyle:{padding:"2px 4px"},style:{"vertical-align":"middle"},_riaswElements:[{_riaswType:"riasw.form.TextBox",_riaswIdInModule:"edtRiaswIdInModule",name:"_riaswIdInModule",label:e.widgetIdOfModule,tooltip:e.widgetIdOfModule,readOnly:!0,intermediateChanges:!0,rc:{col:1,row:1},onChange:function(c){this.ownerModule()._setIsModified()}}]}]},{_riaswType:"riasw.layout.Panel",_riaswIdInModule:"panRiasd",persist:!1,region:"center",caption:e.veRiasd,iconClass:"riasdIcon",style:{"border-width":"1px"},_riaswElements:[{_riaswType:"riasw.layout.TabPanel",_riaswIdInModule:"tabRiasd",persist:!1,region:"center",caption:e.veRiasd,iconClass:"riasdIcon",tabPosition:"bottom",_riaswElements:[{_riaswType:"riasw.layout.Panel",_riaswIdInModule:"panParam",caption:e.veParam,iconClass:"riasdParamIcon",_riaswElements:[{_riaswType:"riasw.editor.CodeEditor",_riaswIdInModule:"edtParam",_currentCaretOffset:{},_currentClientArea:{},region:"center",readOnly:!0,statusReporter:function(c,a){var b=this.ownerModule();b.statusParam&&b.statusParam.set("value",c);b.statusParam.domNode.style.color=a?"red":""},onChange:function(c){var b=this.ownerModule();b._setIsModified();b._checkCodeText(this,c,this.getText(),"edtParamCheck_"+this.id)}},{_riaswType:"riasw.layout.Panel",_riaswIdInModule:"statusBarParam",region:"bottom",style:{height:"2em",padding:"0px"},_riaswElements:[{_riaswType:"riasw.form.TextBox",_riaswIdInModule:"statusParam",region:"center",label:"\u72b6\u6001\u4fe1\u606f",readOnly:!0,style:{}}]}]},{_riaswType:"riasw.layout.Panel",_riaswIdInModule:"panFunc",caption:e.veFunc,iconClass:"riasdFuncIcon",_riaswElements:[{_riaswType:"riasw.editor.CodeEditor",_riaswIdInModule:"edtFunc",_currentCaretOffset:{},_currentClientArea:{},region:"center",readOnly:!0,statusReporter:function(b,a){var c=this.ownerModule();c.statusFunc&&c.statusFunc.set("value",b);c.statusFunc.domNode.style.color=a?"red":""},onChange:function(b){var c=this.ownerModule();c._setIsModified();c._checkCodeText(this,b,this.getText(),"edtFuncCheck_"+this.id)}},{_riaswType:"riasw.layout.Panel",_riaswIdInModule:"statusBarFunc",region:"bottom",style:{height:"2em",padding:"0px"},_riaswElements:[{_riaswType:"riasw.form.TextBox",_riaswIdInModule:"statusFunc",region:"center",label:"\u72b6\u6001\u4fe1\u606f",readOnly:!0,style:{}}]}]}]}]},{_riaswType:"riasw.layout.CaptionPanel",_riaswIdInModule:"panRt",persist:!0,caption:e.veRuntime,iconClass:"riasdPreviewIcon",toggleable:!0,splitter:!0,style:{width:"50%","border-width":"1px"},captionTools:["toolRefresh","toolDockRegion"],dockRegion:"auto",dockRegionArgs:{disabledNone:!0,disabledCenter:!0,initHeight:"50%",initWidth:"50%"},onToolRefresh:function(){var b=this.ownerModule();b.saveCurrentEdtsState();b._refreshEdts(b.currentWidget)},onDockRegionAuto:function(b){if(2*b.w>3*b.h){if("left"!==this._dockRegion)this.onDockRegionLeft()}else if("bottom"!==this._dockRegion)this.onDockRegionBottom()},_riaswElements:[{_riaswType:"riasw.layout.TabPanel",_riaswIdInModule:"tabRt",persist:!1,region:"center",caption:e.veRuntime,iconClass:"riasdPreviewIcon",tabPosition:"bottom",_riaswElements:[{_riaswType:"riasw.layout.Panel",_riaswIdInModule:"panRtObj",region:"center",caption:e.veRuntimeObj,iconClass:"riasdParamIcon",_riaswElements:[{_riaswType:"riasw.editor.CodeEditor",_riaswIdInModule:"edtRtObj",_currentCaretOffset:{},_currentClientArea:{},region:"center",readOnly:!0}]}]}]}]},G={_opened:{sessionid:""},_count:49,_rsfVersion:void 0,position:-1,isMobileApp:!1,pix:"",rotate:!1,items:[]};return{_riaswVersion:"0.7",caption:e.ModuleEditor,iconClass:"riasdIcon",beforeParse:function(){this._dbindOE=b.newDeferred();this._dbindWE=b.newDeferred();this._dLoadPreview=b.newDeferred();this._dbinds=[this._dbindOE,this._dbindWE];this._loadingDeferreds.push(this._dLoadPreview)},afterLoaded:function(){this.we||this.loadEditor()},loadRsfs:function(){var a=this,h=b.newDeferred();b.xhr.get({url:"appweb/rsfs/"+a._riasdModulename+".rsfs",handleAs:"text",silenceError:!0},{},function(c){try{a._rsfs=b.fromJson(c),a._rsfs._opened||(a._rsfs._opened={}),b.isArray(a._rsfs.items)||(a._rsfs.items=[]),10>b.toInt(a._rsfs._count,0)&&(a._rsfs._count=G._count),0>b.toInt(a._rsfs.position,-1)&&(a._rsfs.position=a._rsfs.items.length-1),a._rsfs.position<a._rsfs.items.length&&b.mixin(a._rsfs,a._rsfs.items[a._rsfs.position])}catch(f){}h.resolve()},function(a){h.resolve()},!0);return h.promise},setPreviewDialog:function(a){var c,g=a?a.style:{};this._rsfs.isMobileApp=this._riasdRsfsEditorBtnMobileApp.checked;this._rsfs.pix=this._riasdRsfsEditorBtnPix.value;c=!!(g&&g.width&&g.height);this._riasdRsfsEditorBtnPix.set("disabled",c);c&&this._riasdRsfsEditorBtnPix.set("value","");c=c||!this._riasdRsfsEditorBtnPix.value||this._riasdRsfsEditorBtnPix.value===e.vePixAuto||this._riasdRsfsEditorBtnPix.value===e.vePixSelf;this._riasdRsfsEditorBtnRotate.set("disabled",c);c&&this._riasdRsfsEditorBtnRotate.set("checked",!1);this._rsfs.rotate=this._riasdRsfsEditorBtnRotate.checked;this._riasdRsfsEditorBtnPix.value&&this._riasdRsfsEditorBtnPix.value!==e.vePixAuto?this._riasdRsfsEditorBtnPix.value!==e.vePixSelf&&(c=!c&&this._rsfs.rotate,a=this._riasdRsfsEditorBtnPix.value.split("x"),c=b.mixinDeep({},g,{height:(c?a[0]:a[1])+"px",width:(c?a[1]:a[0])+"px"})):(a=r.getContentBox(this.veContent.containerNode),c=b.mixinDeep({},g),r.hasHeight(c,"",!1)||(c.height=b.toInt(b.max(.7*a.h-20,360))+"px"),r.hasWidth(c,"",!1)||(c.width=this.we&&"right"===this.we._dockRegion?b.toInt(b.max(a.w-72-r.getMarginBox(this.we.domNode).w,360))+"px":b.toInt(b.max(a.w-36,360))+"px"));this.preview&&this.preview.set("style",c);this.previewDialog&&(r.toggleClass(this.previewDialog.containerNode,"mobileBody",this._riasdRsfsEditorBtnMobileApp.get("checked")),this.previewDialog.region="");return c},loadPreviewDialog:function(a){function c(){var c;if(b.isString(a)){c=b.newDeferred("_fDialog.require",b.defaultDeferredTimeout,function(){this.cancel()});try{b.require([a],function(a){c.resolve(a)})}catch(J){c.reject(J)}}else c=a;b.when(c,function(a){f._rsfs||(f._rsfs=b.mixinDeep({},G),console.info("The Module['"+f.caption+"'] has no _rsfs."),b.message({ownerRiasw:f,content:"The Module['"+f.caption+"'] has no _rsfs."}));n=f._rsfs.items[f._rsfs.position];f._rsfs.isMobileApp=n?!!n.isMobileApp:!1;f._rsfs.pix=n?n.pix:"";f._rsfs.rotate=n?!!n.rotate:!1;f._riasdRsfsEditorBtnMobileApp.set("checked",!!f._rsfs.isMobileApp);f._riasdRsfsEditorBtnPix.set("value",f._rsfs.pix?f._rsfs.pix:"");f._riasdRsfsEditorBtnRotate.set("checked",!!f._rsfs.rotate);b.parseRiasws([{_riaswType:"riasw.sys.Dialog",_riaswIdInModule:"previewDialog",persist:!1,caption:e.preview,iconClass:"riasdPreviewIcon",closable:!1,maxable:!1,restrictPadding:-1,toggleable:!0,dockTo:{$refScript:"return module.veDock;"},popupArgs:{around:{x:r.defaultRestrict,y:r.defaultRestrict},popupPositions:["below"]},zIndex:k,style:{top:r.defaultRestrict+"px",left:r.defaultRestrict+"px",overflow:""},captionTools:["toolDockRegion"],dockRegion:"none",dockRegionArgs:{disabledAuto:!0,initHeight:"50%",initWidth:"50%"},onDockRegionNone:function(a){f.preview&&(f.setPreviewDialog(),this._resizeToChild(f.preview),r.setStyle(this.domNode,{top:r.defaultRestrict+"px",left:r.defaultRestrict+"px"}));this.dockRegionSaveWidth=this.dockRegionSaveHeight=!1;this.set("region","")},_riaswElements:[{_riaswType:"riasw.sys.Module",_riaswIdInModule:"preview",_riasrDesigning:!0,_catCounter:{},persist:!1,style:f.setPreviewDialog(a),moduleMeta:a,afterLoadedAllAndShown:function(a){this._rsfVersion=b.toInt(this._rsfVersion,1);try{this.inheritedMeta(arguments)}catch(L){console.error(L),b.error({ownerRiasw:f,content:"The Module['"+f.caption+"'] afterLoadedAllAndShown error."})}a?d.resolve():d.reject()},canHide:function(){try{this.inheritedMeta(arguments)}catch(K){console.error(K),b.error({ownerRiasw:f,content:"The Module['"+f.caption+"'] canHide error."})}return 0}}]}],f.veContent,f.veContent,0).then(function(a){a.errors?(b.error({ownerRiasw:f,content:a.errors}),d.reject()):0<a.widgets.length?(f.previewDialog=a.widgets[0],f.preview=f.previewDialog.preview,r.addClass(f.preview.domNode,"riasdPreview"),f.preview.riasdCurrentVe=f,f.ol&&(f.ol.currentModule=f.preview),f.we&&(f.we.currentModule=f.preview),f.previewDialog.own(f.preview.watch("caption",function(a,b,c){f.previewDialog.set("caption",e.preview+"("+c+")")}),f.preview.watch("tooltip",function(a,b,c){f.previewDialog.set("tooltip",c)}),f.preview.watch("iconClass",function(a,b,c){f.previewDialog.set("iconClass",c)}),f.preview.watch("badgeStyle",function(a,b,c){f.previewDialog.set("badgeStyle",c)}),f.preview.watch("badgeColor",function(a,b,c){f.previewDialog.set("badgeColor",c)}),f.preview.watch("badge",function(a,b,c){f.previewDialog.set("badge",c)}))):(delete f.preview,delete f.previewDialog,f.ol&&delete f.ol.currentModule,f.we&&delete f.we.currentModule,d.reject())})},function(a){b.error({ownerRiasw:f,content:a.message});d.reject()})}function g(){f.currentModule=f?f.preview:void 0;f.ol&&f.currentModule&&(f.ol.loadOutline(f.currentModule,f.ol._currentWidgetId).then(function(){}),f.defer(function(){f._riasdPreviewLoading=!1;f._riasdPreviewLoaded=!0;f.setPreviewDialog(f.currentModule._riaswModuleMeta);f.currentModule.region="center";0===f._rsfs.items.length?f.ol._save(f).then(function(a){}):f.mJs&&f.mJs.edtModuleJs&&f.mJs.edtModuleJs.setText(b.toJson(f.currentModule._riaswModuleMeta,{prettyPrint:!0,includeFunc:!0}),1);f.set("modified",!1);f._dLoadPreview.resolve(f.preview);b.removeItems(f._loadingDeferreds,f._dLoadPreview)}))}var f=this,d=b.newDeferred("loadPreviewDialog",b.defaultDeferredTimeout,function(){this.cancel()}),k,n;f._riasdPreviewLoading=!0;f._riasdPreviewLoaded=!1;a?b.isString(a)&&(f._riasdModulename=a):a=f._riasdModulename;b.all(f._dbinds).then(function(){f.loadRsfs().then(function(){if(f.previewDialog){k=f.previewDialog.zIndex;var a=b.after(f.previewDialog,"_afterDestroyed",function(){a.remove();a=void 0;delete f.preview;delete f.previewDialog;f.defer(function(){c()})},!1);f.previewDialog.destroy()}else f.defer(function(){c()})})});f.set("_isModified",!1);d.then(function(){g()},function(a){g()});return d.promise},loadEditor:function(){var a=this,h;a.defer(function(){h=r.getContentBox(a.veContent.containerNode);a.ol.riasdCurrentVe=a;b.parseRiasws([{_riaswType:"riasw.sys.Dialog",_riaswIdInModule:"we",riasdCurrentVe:a,persist:!0,caption:e.widgetEditor,iconClass:"riasdIcon",closable:!1,toggleable:!0,maxable:!0,minSize:{h:240,w:360},restrictPadding:w,dockTo:{$refScript:"return module.veDock;"},moduleMeta:M,captionTools:["toolDockRegion"],dockRegion:"auto",dockRegionArgs:{disabledNone:!0,disabledCenter:!0,disabledTop:!0,initHeight:"30em",initWidth:"30em"},onDockRegionAuto:function(a){if(2*a.w>3*a.h){if("right"!==this._dockRegion)this.onDockRegionRight()}else if("bottom"!==this._dockRegion)this.onDockRegionBottom()},onDockRegionLeft:function(){this.restrictBox={top:w+"px",bottom:"18px",right:w+"px"};this.set("style",{width:this.dockRegionSize.left||this.dockRegionArgs.initWidth});this._dockRegion="left";this.dockRegionSaveHeight=!1;this.dockRegionSaveWidth=!0},onDockRegionRight:function(){this.restrictBox={top:w+"px",bottom:"18px",right:w+"px"};this.set("style",{width:this.dockRegionSize.width||this.dockRegionArgs.initWidth});this._dockRegion="right";this.dockRegionSaveHeight=!1;this.dockRegionSaveWidth=!0},onDockRegionBottom:function(){this.restrictBox={bottom:"18px",left:w+"px",right:w+"px"};this.set("style",{height:this.dockRegionSize.height||this.dockRegionArgs.initHeight});this._dockRegion="bottom";this.dockRegionSaveHeight=!0;this.dockRegionSaveWidth=!1},afterParse:function(a){this.inheritedMeta(arguments);this.ownerModule()._dbindWE.resolve(a)}}],a.veContent,a.veContent,0).then(function(c){b.all(a._dbinds).then(function(){a._riasdRsfsEditorBtnMobileApp=a.ol._riasdRsfsEditorBtnMobileApp;a._riasdRsfsEditorBtnPix=a.ol._riasdRsfsEditorBtnPix;a._riasdRsfsEditorBtnRotate=a.ol._riasdRsfsEditorBtnRotate;a.own(b.subscribe("/riasd/currentModuleSaved",function(c){c.module===a.currentModule&&a.mJs&&a.mJs.edtModuleJs&&a.mJs.edtModuleJs.setText(b.toJson(c.rsf._meta,{prettyPrint:!0,includeFunc:!0}),1)}));a.defer(function(){a.loadPreviewDialog()},10)})});a.own(b.subscribe("/riasd/currentModuleJs",function(c){c.module===a.currentModule&&(!c.opened&&a.mJs&&a.mJs.close(),c.opened&&!a.mJs&&(h=r.getContentBox(a.veContent.containerNode),b.parseRiasws([{_riaswType:"riasw.sys.Dialog",_riaswIdInModule:"mJs",persist:!0,caption:e.moduleJs,iconClass:"riasdJsIcon",closable:!0,toggleable:!0,maxable:!0,minSize:{h:240,w:480},dockTo:{$refScript:"return module.veDock;"},style:{width:b.max(600,b.toInt(h.w-r.defaultRestrict-r.defaultRestrict))+"px",height:b.max(360,b.toInt(.5*h.h))+"px",padding:"0px"},_riaswElements:[{_riaswType:"riasw.editor.CodeEditor",_riaswIdInModule:"edtModuleJs",_currentCaretOffset:{},_currentClientArea:{},region:"center",readOnly:!0,onChange:function(a){}}],onHide:function(){a.ol.btnModuleJs.set("checked",!1)}}],a.vePanel,a.vePanel,0).then(function(g){a.mJs.edtModuleJs.setText(b.toJson(c.module._riaswModuleMeta,{prettyPrint:!0,includeFunc:!0}),1)})))}))},0)},_getModifiedAttr:function(){return this.ol&&this.ol.get("isModified")||this.we&&this.we.get("isModified")},canHide:function(){return 1},_riaswElements:[{_riaswType:"riasw.layout.Panel",_riaswIdInModule:"vePanel","class":"riasdPreviewPanel",design:"sidebar",region:"center",style:{padding:"0px"},_riaswElements:[{_riaswType:"riasw.layout.DockBar",_riaswIdInModule:"veDock",persist:!1,"class":"riasdBtnsDockBar",region:"right",layoutVertical:!0,layoutPriority:0,style:{},_riaswElements:[]},{_riaswType:"riasw.layout.Panel",_riaswIdInModule:"veContent",persist:!1,region:"center","class":"riasdPreviewContentPanel",style:{},_riaswElements:[]},{_riaswType:"riasw.layout.CaptionPanel",_riaswIdInModule:"olPanel",persist:!0,region:"right",layoutPriority:1,splitter:!0,caption:e.ModuleEditor,iconClass:"outlineIcon",closable:!1,toggleable:!0,maxable:!1,minSize:{h:360,w:"25em"},dockTo:{$refScript:"return module.veDock;"},style:{"border-left-width":"1px",width:"25em",padding:"0px"},captionTools:[{_riaswType:"riasw.sys.ToolButton",toolName:"toolClearPersist",iconClass:"clearIcon",showLabel:!1,label:b.i18n.desktop.clearPersist,tooltip:b.i18n.desktop.clearPersist,onClick:function(a){var c=this.ownerModule();b.confirm({content:b.i18n.riasd.confirmClearPersist,caption:b.i18n.action.confirm,onSubmit:function(){c.clearPersist()}},this,this)}},"toolDockRegion"],dockRegion:"right",dockRegionArgs:{disabledNone:!0,disabledAuto:!0,disabledCenter:!0,disabledTop:!0,disabledBottom:!0,initWidth:"25em"},_riaswElements:[{_riaswType:"riasw.sys.Module",_riaswIdInModule:"ol",_riasdEditor:{$refObj:"riasd"},persist:!1,moduleMeta:{requires:[],_riaswVersion:"0.7",caption:e.veOutline,actions:{save:"act/riasd/saveAppModule",undo:"act/riasd/rsfsUndo",redo:"act/riasd/rsfsRedo"},afterParse:function(a){var c=this;c.own(b.subscribe("/riasd/currentOutlineModified",function(a){var g=c.riasdCurrentVe,h=a.widget,d;a.module===c.currentModule&&(g.set("_isModified",!0),c._setBtnState(),d=c._refreshRsf(a.reload),c._save(g,d,a.reload).then(function(c){!a.reload&&b.isRiasw(h)&&h._containerLayout()}))}));c.own(b.subscribe("/riasd/currentWidgetModified",function(a){a.widget===c.currentWidget&&c._checkCurrent(a.sender||c.btnSave)&&c._modiWidget("modify",a.params,a.reload).then(function(){b.isFunction(a.callback)&&a.callback()})}));c.setCurrentWidget(c.currentWidget)},_destroyCE:function(a){this.htmlEditor&&(a?this.htmlEditor.submit():this.htmlEditor.abort())},beforeDestroyed:function(){this._destroyCE(!1)},_setReadOnlyAttr:function(a){this.readOnly!==a&&(this.readOnly=!!a,this.currentWidgetEditor&&this.currentWidgetEditor.set("readOnly",a),this._setBtnState())},_setBtnState:function(){function a(b){return!(!b||b!==h._riasdEditor._cutWidget&&!a(b.getOwnerRiasw()))}var h=this,g=h.riasdCurrentVe,f=g._riasdModifying,d=h.currentWidget,e=h.currentModule,k=y(d),n=d&&d.getOwnerRiasw()?d===e?0:d.getOwnerRiasw()._riaswElements.length:0;h.btnRefresh.set("disabled",f||!e);h.btnModi.set("disabled",f||!g||g._riasdModifying||!d||d===e||!d.content);h.btnAdd.set("disabled",f||!g||g._riasdModifying||!d||!d.is(u)||d!==e&&b.isRiaswModule(d));h.btnDelete.set("disabled",f||!g||g._riasdModifying||!d||d===e);h.btnCut.set("disabled",f||!g||g._riasdModifying||!d||d===e);h.btnCopy.set("disabled",f||!g||g._riasdModifying||!d||d===e);h.btnPaste.set("disabled",f||!g||g._riasdModifying||!d||!d.is(u)||d!==e&&b.isRiaswModule(d)||!(h._riasdEditor._copyWidget||h._riasdEditor._cutWidget)||a(d));h.btnUp.set("disabled",f||!g||g._riasdModifying||!d||d===e||1>k);h.btnDown.set("disabled",f||!g||g._riasdModifying||!d||d===e||k>=n-1);h.edtRiaswType.set("readOnly",f||!g||g._riasdModifying||!e||!d||d===e);h.edtRiaswIdInModule.set("readOnly",f||!g||g._riasdModifying||!e||!d||d===e);h.btnRun.set("disabled",f||!g||g._riasdPreviewLoading);h.btnSave.set("disabled",f||!g||g._riasdSaving||!(g.get("_isModified")||h.get("_isModified")||g.we.get("_isModified")));h.btnSaveAs.set("disabled",f||!g||g._riasdSaving||g.get("_isModified")||h.get("_isModified")||g.we.get("_isModified"));h.btnBrowse.set("disabled",!g||g.get("_isModified")||h.get("_isModified")||g.we.get("_isModified"));h.btnUndo.set("disabled",f||!g||g._riasdPreviewLoading||!(g._rsfs&&0<g._rsfs.position&&0<g._rsfs.items.length));h.btnRedo.set("disabled",f||!g||g._riasdPreviewLoading||!(g._rsfs&&0<g._rsfs.items.length&&g._rsfs.items.length>g._rsfs.position+1));h.btnModuleJs.set("disabled",f||!e);h.currentVersion.set("value",e&&e._rsfVersion?e._rsfVersion:"0");h.btnUndo.set("badge",b.toStr(g&&g._rsfs?g._rsfs.position:""));h.btnRedo.set("badge",b.toStr(g&&g._rsfs?g._rsfs.items.length-1-g._rsfs.position:""))},_checkCurrent:function(a){var c=!0,g=this.currentWidget,d=this.currentModule,e="\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u8282\u70b9.";if(g)if(b.isRiasObject(g)&&g.getOwnerRiasw())switch(a){case this.btnPaste:case this.btnAdd:c=g.is(u)&&(g===d||!b.isRiaswModule(g));e="\u5f53\u524d\u8282\u70b9\u4e0d\u80fd\u6dfb\u52a0\u4e0b\u7ea7...";break;case this.btnDelete:case this.btnCut:case this.btnCopy:case this.btnUp:case this.btnDown:c=g!==d}else e="\u5f53\u524d\u8282\u70b9\u7f3a\u5c11\u5b9e\u4f8b\uff0c\u53ef\u80fd\u5df2\u7ecf\u91ca\u653e...",c=!1;else c=!1;c||b.message(e,this,a);return c},setCurrentWidget:function(a,d){var c=this,f=a,h=c.currentWidget,e=[],k;if(f&&f.id!==c._currentWidgetId&&c.currentWidgetEditor.get("_isModified"))b.choose({ownerRiasw:c,popupArgs:{parent:c.riasdCurrentVe,around:c.currentWidgetEditor.btnSave},content:"\u6709\u4fee\u6539\uff0c\u662f\u5426\u4fdd\u5b58?",caption:b.i18n.action.save,onHide:function(){b.formResult.isSubmit(this.formResult)?c.currentWidgetEditor._actSubmitChange(function(){c.currentWidgetEditor._setIsModified(!1);c.setCurrentWidget(f,d)}):(c.currentWidgetEditor._setIsModified(!1),c.setCurrentWidget(f,d))}});else if(f&&f!==c.currentModule&&f.ownerModule()!==c.currentModule&&(f=void 0),h&&b.isRiasw(h)&&r.removeClass(h.domNode,"riasdCurrentWidget"),f&&b.isRiasw(f)&&r.addClass(f.domNode,"riasdCurrentWidget"),c.currentWidget=f,c._currentWidgetId=f?f.id:"",c.contentLoaded){try{c.currentWidgetEditor&&c.currentWidgetEditor.contentLoaded&&c.currentWidgetEditor.setCurrentWidget(f)}catch(I){console.error(I)}h=(h=f?f.id.startWith(c.riasdCurrentVe.id+"_preview"):!1)?"..."+f.id.substring((c.riasdCurrentVe.id+"_preview").length+1):"";c.edtId.set("tooltip",f?f.id:"");c.edtId.set("value",h);c.edtRiaswType.set("value",f?f._riaswType:"");c.edtRiaswIdInModule.set("value",f?f===c.currentModule?"preview":f._riaswIdInModule?f._riaswIdInModule:"":"");if(f&&(k=c.riasdCurrentVe.we.get("zIndex")>c.riasdCurrentVe.previewDialog.get("zIndex"),c.defer(function(){b.isFunction(f.focus)&&f.restore(!0,!0,!1).then(function(){f.is(t);r.scrollIntoView(f.domNode);k&&c.defer(function(){c.riasdCurrentVe.we.focus()},500)})}),!(d||c.outline.selectedItems[0]&&c.outline.selectedItems[0].id===f.id))){for(h=f;h&&h!==c.currentModule;)e.unshift(h.id),h=h.getOwnerRiasw();c.currentModule&&e.unshift(c.currentModule.id);e.unshift(c.outline.rootNode.item.id);c.outline.set("paths",[e])}c._setBtnState()}},reloadOutline:function(a){var c=this,d=c.riasdCurrentVe;d._riasdOutlineLoading=!0;d._riasdOutlineLoaded=!1;return c.outline.load(c.currentModule).then(function(){d._riasdOutlineLoading=!1;d._riasdOutlineLoaded=!0;c.setCurrentWidget(b.by(a||c._currentWidgetId)||c.currentWidget)})},loadOutline:function(a,b){delete this._riasdEditor._cutWidget;0<arguments.length&&(this.currentModule=a);this.currentModule&&this.currentModule.riasdCurrentVe?this.currentWidgetEditor=this.currentModule.riasdCurrentVe.we:delete this.currentWidgetEditor;return this.reloadOutline(b)},clear:function(){this.setCurrentWidget();this.outline.clear()},_modiWidget:function(a,d,g){function c(a){a instanceof Error?w+=(w?"\n":"")+a.message:a&&(w+=(w?"\n":"")+a)}function h(a){v=y(a);0<=v&&a.getOwnerRiasw()._riaswElements.splice(v,1);b.destroy(a)}function e(a){var c,d,f,e={e:[],r:[]};a._riasdRefChildren&&(f=b.hitch(a,a[a._riasdRefChildren.remove]),b.forEach(a[a._riasdRefChildren.items],function(a){g=!0;e.r.push(a);f(a)}));if(!b.isRiaswModule(a)&&a._riaswElements&&a._riaswElements.length)for(c=a._riaswElements.length-1;0<=c;c--)d=a._riaswElements[c].__riasrWidget,a.removeChild(d),e.e.unshift(d.orphan());h(a);return e}function n(a,c){var d;a._riasdRefChildren&&(d=b.hitch(a,a[a._riasdRefChildren.add]),b.forEach(c,function(a){d(a)}));return c}function p(a,d,f,g,e){var h=d._riaswElements;a=H(q.currentModule,a);b.isArray(a)?-1<f?h.splice.apply(h,[f,0].concat(a)):h.splice.apply(h,[h.length,0].concat(a)):-1<f?h.splice(f,0,a):h.push(a);b.parseRiasws(a,d,d,f).then(function(d){d?(c(d.errors),l=d.widgets[0]):l=void 0;if(l){b.isArray(g)&&(l._riaswElements=l._riaswElements.concat(g),l._riaswParams._riaswElements||(l._riaswParams._riaswElements=[]),l._riaswParams._riaswElements=l._riaswParams._riaswElements.concat(g));if(e){d=e.e;var f;for(f=0;f<d.length;f++)l.addChild(d[f]);n(l,e.r)}q.setCurrentWidget(l,!0);m(l)}else r("add() error:"+a)},function(a){r(a)})}function m(a){w&&b.error("modiWidget() error:\n"+w,q,q.btnSave);a?(q._currentWidgetId=a.id,b.publish("/riasd/currentOutlineModified",{module:z,widget:a,reload:g}),g?x.resolve(a):q.reloadOutline().then(function(){x.resolve(a)})):x.resolve()}function r(a){console.error(b.getStackTrace());b.error("modiWidget() error:\n"+w+"\n"+(a?a.message?a.message:a:""),q);x.reject(a)}var q=this,t=q.riasdCurrentVe,l=q.currentWidget,z=q.currentModule,u,A,v,w="",B,x=b.newDeferred("_modiWidget",b.defaultDeferredTimeout,function(){this.cancel()});t._riasdModifying=!0;q._setBtnState();if(b.isRiasObject(l)&&l.getOwnerRiasw())try{switch(a){case "modify":l===z?(d._riaswElements=D(l._riaswElements,1),k(q.currentModule,d,l),g=!0,m(l)):(l._riaswIdInModule&&b.isString(l._riaswIdInModule)&&!~l._riaswIdInModule.indexOf(".")&&b.getObject(l._riaswIdInModule,!1,l.ownerModule())===l&&delete l.ownerModule()[l._riaswIdInModule],d._riaswIdInModule&&b.isString(d._riaswIdInModule)&&(~d._riaswIdInModule.indexOf(".")&&(B="The widget's _riaswIdInModule("+d._riaswIdInModule+') cannot contains ".". ',c(B),console.error(B),r(B)),b.getObject(d._riaswIdInModule,!1,l.ownerModule())&&(B="Duplication _riaswIdInModule of '"+d._riaswIdInModule+"' in module of '"+l.ownerModule().id+"'",c(B),console.error(B,d),r(B))),A=l.getOwnerRiasw(),u=l._riaswElements,v=y(l),p(d,A,v,u,e(l)));break;case "add":p(d,l);break;case "dele":this._riasdEditor._cutWidget&&this._riasdEditor._cutWidget._cw===l&&(this._riasdEditor._copyWidget={_cm:this._riasdEditor._cutWidget._cm,_ps:this._riasdEditor._cutWidget._ps},delete this._riasdEditor._cutWidget);A=l.getOwnerRiasw();h(l);m(A);break;case "up":v=y(l);0<v&&(A=l.getOwnerRiasw(),h(l),p(l._riaswParams,A,v-1));break;case "down":v=y(l);-1<v&&v<l.getOwnerRiasw()._riaswElements.length-1&&(A=l.getOwnerRiasw(),h(l),p(l._riaswParams,A,v+1));break;case "copy":u=D(l);this._riasdEditor._copyWidget={_cm:z,_ps:u};delete this._riasdEditor._cutWidget;m();break;case "cut":u=D(l);this._riasdEditor._cutWidget={_cm:z,_cw:l,_ps:u};delete this._riasdEditor._copyWidget;m();break;case "paste":this._riasdEditor._cutWidget?this._riasdEditor._cutWidget._cm!==z?p(this._riasdEditor._cutWidget._ps,l):(v=y(this._riasdEditor._cutWidget._cw),-1<v&&v<this._riasdEditor._cutWidget._cw.getOwnerRiasw()._riaswElements.length&&this._riasdEditor._cutWidget._cw.getOwnerRiasw()._riaswElements.splice(v,1),l._riaswElements||(l._riaswElements=[]),0>l._riaswElements.indexOf(this._riasdEditor._cutWidget._cw._riaswParams)&&l._riaswElements.push(this._riasdEditor._cutWidget._cw._riaswParams),l.addChild(this._riasdEditor._cutWidget._cw),l.own(this._riasdEditor._cutWidget._cw),m(this._riasdEditor._cutWidget._cw),delete this._riasdEditor._cutWidget):this._riasdEditor._copyWidget?p(this._riasdEditor._copyWidget._ps,l):m();break;default:m(l)}}catch(N){r(N)}else r("\u5f53\u524d\u8282\u70b9\u7f3a\u5c11\u5b9e\u4f8b\uff0c\u53ef\u80fd\u5df2\u7ecf\u91ca\u653e...");x.promise.always(function(a){t._riasdModifying=!1;q._setBtnState()});return x.promise},_actModi:function(){var a=this.currentModule,d=this.currentWidget,g=this.htmlEditor,f;this._checkCurrent(this.btnModi)&&(g&&this._destroyCE(!1),d&&(f=r.getContentBox(this.riasdCurrentVe.containerNode),g=b.showDialog({ownerRiasw:this,_riaswIdInModule:"htmlEditor",parent:b.ownerSceneBy(this),dialogType:"modal",maxable:!0,caption:e.HTMLEditor,style:{width:.7*f.w+"px",height:.7*f.h+"px"},actionBar:["btnSave","btnClose"],moduleMeta:{_riaswElements:[{_riaswType:"riasw.editor.HTMLEditor",_riaswIdInModule:"_editor",value:d.get("content"),plugins:"all",region:"center",style:{margin:"0.5em"}}]},onHide:function(){this._editor&&(b.formResult.isSubmit(this.formResult)?(this._editor.close(!0),f=this._editor.get("value")):(this._editor.close(!1),f=d.get("content")),b.publish("/riasd/widgetContentModified",{widget:d,content:f}))}}),this.__riasdWidgetModifiedListener&&(this.__riasdWidgetModifiedListener.remove(),delete this.__riasdWidgetModifiedListener),d&&this.own(this.__riasdWidgetModifiedListener=b.subscribe("/riasd/widgetContentModified",function(c){d&&(f=d._riaswParams.content!==c.content,d.content=c.content,d.load(),f&&(d._riaswParams.content=c.content,b.publish("/riasd/currentOutlineModified",{module:a,widget:d,reload:!1})))}))))},_actAdd:function(){var a=this,d="";a._checkCurrent(a.btnAdd)&&b.showSelect({ownerRiasw:a,_riaswIdInModule:"addWidget",popupArgs:{parent:a.riasdCurrentVe,around:a.btnAdd},actionBarPosition:"top",caption:"\u589e\u52a0\u63a7\u4ef6",style:{"min-width":"25em","min-height":"40em",width:"31em",height:"70%"},moduleMeta:F,afterSubmit:function(c){return c?b.requireRiaswCtor(c,function(a){d+=a}).then(function(f){d?b.error({ownerRiasw:a,content:d}):a._modiWidget("add",n(a.currentModule,{_riaswType:c},a.currentWidget))},function(c){b.error({ownerRiasw:a,content:d})}):!1}})},_actDele:function(){var a=this;a._checkCurrent(a.btnDelete)&&b.choose({ownerRiasw:a,popupArgs:{parent:a.riasdCurrentVe,around:a.btnDelete},content:"\u662f\u5426\u5220\u9664["+(a.currentWidget._riaswIdInModule||a.currentWidget.id)+"]?",caption:b.i18n.action.dele,onSubmit:function(){a._modiWidget("dele")}})},_actModiTypeOrId:function(a,d,g,f){var c=this.currentWidget,e=this.currentModule,h=b.mixin({},c._riaswParams);a=b.trim(a);d=b.trim(d);if(!c||!e)return b.error("no currentWidget/currentModule.",g,f),!1;if(c===e)return b.message("\u4e0d\u5141\u8bb8\u4fee\u6539\u6a21\u5757\u7684\u7c7b\u578b\u548cid.",g,f),!1;if(!d)return b.error("_riaswType \u4e0d\u80fd\u7a7a.",g,f),!1;if(!a&&c!==e)return b.error("_riaswIdInModule \u4e0d\u80fd\u7a7a.",g,f),!1;if(1>a.length||20<a.length)return b.error("_riaswIdInModule \u7684\u957f\u5ea6\u4e3a 1 ~ 20.",g,f),!1;if(!/^[a-z][a-zA-Z0-9_]+$/.test(a))return b.error("_riaswIdInModule \u5305\u542b\u975e\u89c4\u8303\u5b57\u7b26.",g,f),!1;if(a&&e[a]&&e[a]!==c)return b.error("_riaswIdInModule \u6709\u9519\u6216\u5df2\u5b58\u5728.",g,f),!1;delete h._riaswElements;h._riaswIdInModule=a;c!==e?(h.id=e.id+"_"+a,h._riaswType=d,h._riaswIdInModule=a):(delete h.id,delete h._riaswIdInModule);c===e&&c._riaswType===d&&c._riaswIdInModule===a||b.publish("/riasd/currentWidgetModified",{widget:c,params:h,reload:!0});return!0},_actRun:function(a){var c=this.riasdCurrentVe;a&&c.get("_isModified")?(c._riasdPreviewLoading=!1,c._riasdPreviewLoaded=!0,b.message("\u8bf7\u5148\u4fdd\u5b58\u6a21\u5757\u9875\u9762...",this,this.btnSave)):c.loadPreviewDialog()},_actUndo:function(){var a=this,d=a.riasdCurrentVe;d._riasdPreviewLoading=!0;d._riasdPreviewLoaded=!1;b.undef(d._riasdModulename);b.xhr.post(a.actions.undo,{pathname:d._riasdModulename},function(c){!c.success||1>c.success?(d._riasdPreviewLoading=!1,d._riasdPreviewLoaded=!1,b.error({ownerRiasw:a,content:b.i18n.action.undo+"\u5931\u8d25...",caption:a.caption})):a._actRun()})},_actRedo:function(){var a=this,d=a.riasdCurrentVe;d._riasdPreviewLoading=!0;d._riasdPreviewLoaded=!1;b.undef(d._riasdModulename);b.xhr.post(a.actions.redo,{pathname:d._riasdModulename},function(c){!c.success||1>c.success?(d._riasdPreviewLoading=!1,d._riasdPreviewLoaded=!1,b.error({ownerRiasw:a,content:b.i18n.action.redo+"\u5931\u8d25...",caption:a.caption})):a._actRun()})},_refreshRsf:function(a){var c=this.riasdCurrentVe,d=this.currentModule,f={};c&&d&&(f.reload=a,f.isMobileApp=!!c._rsfs.isMobileApp,f.pix=c._rsfs.pix?c._rsfs.pix:"",f.rotate=!!c._rsfs.rotate,f._meta=b.mixinDeep({},d._riaswModuleMeta),f._meta._riaswElements=D(d._riaswElements,!1),A(f._meta,["__riasrWidget"]));return f},_save:function(a,d,g,f){function c(c){b.undef(a._riasdModulename);c=c||h._refreshRsf(g);b.xhr.post(h.actions.save,{pathname:a._riasdModulename,_rsf:b.toJson(c,{prettyPrint:!0,includeFunc:!0,loopToString:!1,errorToString:!0,simpleObject:!0})},function(d){!d.success||1>d.success?(a._riasdSaving=!1,a._riasdSaved=!1,b.error({ownerRiasw:h,content:b.i18n.action.save+"\u5931\u8d25...",caption:h.caption}),n.reject(d.value)):(a._riasdSaving=!1,a._riasdSaved=!0,b.hint("\u5df2\u4fdd\u5b58"+a.caption,h,h.btnSave),a.set("_isModified",!1),b.publish("/riasd/currentModuleSaved",{module:a.preview,riasdModulename:a._riasdModulename,rsf:c}),n.resolve(d))},function(b){a._riasdSaving=!1;a._riasdSaved=!1;n.reject(b)})}function e(){h.currentWidgetEditor.get("_isModified")?h.currentWidgetEditor._actSubmitChange(function(){h.currentWidgetEditor._setIsModified(!1);c()}):c()}var h=this,k=h.currentModule,n=b.newDeferred();a._riasdSaving=!0;a._riasdSaved=!1;a?f||a._riasdModulename!==b.desktop.moduleMeta&&a._riasdModulename!==b.ownerSceneBy(a).moduleMeta?e():b.choose({ownerRiasw:h,popupArgs:{parent:h.riasdCurrentVe,around:h.btnSave},content:"\x3cfont color\x3d'salmon'\x3e\u8be5\u6a21\u5757\u662f\u4e3b\u6a21\u5757\uff0c\u8bf7\u8c28\u614e\u4fee\u6539\uff01\x3c/font\x3e\x3cbr /\x3e\u662f\u5426\u4fdd\u5b58["+a.caption+"]?",onHide:function(){b.formResult.isSubmit(this.formResult)?b.choose({ownerRiasw:h,popupArgs:{parent:h.riasdCurrentVe,around:h.btnSave},content:"\x3cfont color\x3d'salmon'\x3e\u8be5\u6a21\u5757\u662f\u4e3b\u6a21\u5757\uff0c\u8bf7\u8c28\u614e\u4fee\u6539\uff01\x3c/font\x3e\x3cbr /\x3e\u8bf7\u518d\u6b21\u786e\u8ba4\u662f\u5426\u4fdd\u5b58["+a.caption+"]?",onHide:function(){b.formResult.isSubmit(this.formResult)?e():n.cancel(-1)}}):n.cancel(-1)}}):n.reject(-1);n.then(function(){g?h._actRun():a.loadRsfs().then(function(){k._rsfVersion=a._rsfs.rsfVersion;h._setBtnState()})});return n.promise},_actSave:function(a){var b=this.riasdCurrentVe,c=this._refreshRsf(a);return this._save(b,c,a).then(function(a){})},_saveAs:function(a,d){var c=this,f=c.riasdCurrentVe,e=b.newDeferred();f._riasdSaving=!0;f._riasdSaved=!1;a&&b.isString(a)?(b.undef(a),d=d||c._refreshRsf(!1),b.xhr.post(c.actions.save,{pathname:a,_rsf:b.toJson(d,{prettyPrint:!0,includeFunc:!0,loopToString:!1,errorToString:!0,simpleObject:!0})},function(d){!d.success||1>d.success?(f._riasdSaving=!1,f._riasdSaved=!1,b.error({ownerRiasw:c,content:b.i18n.action.save+"\u5931\u8d25...",caption:c.caption}),e.reject(d.value)):(f._riasdSaving=!1,f._riasdSaved=!0,b.hint("\u5df2\u53e6\u5b58\u4e3a"+a,c,c.btnSave),e.resolve(d))},function(a){f._riasdSaving=!1;f._riasdSaved=!1;e.reject(a)})):e.reject(-1);return e.promise},_actSaveAs:function(a){var c=this,d=c._refreshRsf(a);(function(){delete d._meta._rsfVersion;b.showDialog({ownerRiasw:c,_riaswIdInModule:"fileSelector",dialogType:"top",popupArgs:{parent:c.riasdCurrentVe,around:c.btnSaveAs},btnOkLabel:"\u53e6\u5b58\u4e3a",caption:b.i18n.action.saveAs,style:{width:"30em",height:"70%"},moduleMeta:q,afterSubmit:function(f){var e;if(!f)return!1;if("file"===f.itemType)return e=f.pathname.replace(/\.js$/gi,"").replace(/\.rsf$/gi,"").replace(/\./gi,"/"),b.choose({ownerRiasw:c,popupArgs:{parent:c.riasdCurrentVe,around:c.btnSaveAs},content:"\u662f\u5426\u53e6\u5b58\u4e3a["+e+"]?",caption:b.i18n.action.saveAs,onSubmit:function(){return c._saveAs(e,d).then(function(c){a&&b.desktop.launchRiasdModule(e);return!!c.success},function(a){return a})}})}})})()},_actBrowse:function(a){var c=this.riasdCurrentVe,d={};c?c.get("_isModified")?b.message("\u8bf7\u5148\u4fdd\u5b58\u6a21\u5757\u9875\u9762...",this,this.btnSave):(d.cacheBust=void 0!=a?a:!this.pagePreviewNoCacheBust,d.appName=b.desktop.appName,d.title=b.i18n.action.pagePreview+": "+c._riasdModulename,d.module=c._riasdModulename,d.theme=b.theme.themeParams.name,d.mobileTheme=b.theme.themeParams.mobileTheme,b.xhr.open("act/riass/page",d,!0,"")):b.message("\u8bf7\u5148\u9009\u62e9\u4e00\u4e2a\u6a21\u5757\u9875\u9762...",this,this.btnOpen)},_actToggleModuleJs:function(a){b.publish("/riasd/currentModuleJs",{module:this.riasdCurrentVe.currentModule,opened:a})},_actRsfChanged:function(){var a=this.riasdCurrentVe;a._riasdPreviewLoaded&&a.setPreviewDialog(a&&a.preview?a.preview._riaswModuleMeta:null)&&this._save(a).then(function(a){})},_riaswElements:[{_riaswType:"riasw.layout.Panel",_riaswIdInModule:"main",persist:!1,region:"center",caption:e.veOutline,design:"sidebar",_riaswElements:[{_riaswType:"riasw.sys.Toolbar",_riaswIdInModule:"btnsBar",region:"top",layoutPriority:1,style:{"border-bottom":"1px solid lightgray",padding:"1px"},_riaswElements:[{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnRun",showLabel:!1,label:b.i18n.action.run,tooltip:b.i18n.action.run,disabled:!0,iconClass:"runIcon",onClick:function(a){this.ownerModule()._actRun(!0)}},{_riaswType:"riasw.form.DropDownButton",_riaswIdInModule:"btnBrowse",showLabel:!1,label:e.pagePreview,tooltip:e.pagePreview,disabled:!0,iconClass:"printPreviewIcon",dropDown:{_riaswType:"riasw.sys.Menu",onShow:function(){var a=this.ownerModule();return a.menuPagePreview?!0:b.parseRiasws([{_riaswType:"riasw.sys.MenuItem",_riaswIdInModule:"menuPagePreview",label:e.pagePreview,tooltip:e.pagePreview,onClick:function(b){a.pagePreviewNoCacheBust=!b;a._actBrowse(a.pagePreviewNoCacheBust)}},{_riaswType:"riasw.sys.MenuSeparator",_riaswIdInModule:"btnBrowseMenuSeparator"},{_riaswType:"riasw.sys.MenuItem",_riaswIdInModule:"menuPagePreviewNoCacheBust",label:e.pagePreviewNoCacheBust,tooltip:e.pagePreviewNoCacheBust,onClick:function(b){a.pagePreviewNoCacheBust=b;a._actBrowse(a.pagePreviewNoCacheBust)}}],this,this)}}},{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnSave",showLabel:!1,label:b.i18n.action.save,tooltip:b.i18n.action.save,disabled:!0,iconClass:"saveIcon",onClick:function(a){this.ownerModule()._actSave(!0)}},{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnSaveAs",showLabel:!1,label:b.i18n.action.saveAs,tooltip:b.i18n.action.saveAs,disabled:!0,iconClass:"saveAsIcon",onClick:function(a){this.ownerModule()._actSaveAs(!0)}},{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnUndo",showLabel:!1,label:b.i18n.action.undo,tooltip:b.i18n.action.undo,disabled:!0,iconClass:"undoIcon",badgeColor:"y",style:{},onCheckBusy:function(a){return!!this.ownerModule().riasdCurrentVe._riasdPreviewLoading},onClick:function(a){this.ownerModule()._actUndo()}},{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnRedo",showLabel:!1,label:b.i18n.action.redo,tooltip:b.i18n.action.redo,disabled:!0,iconClass:"redoIcon",badgeColor:"g",style:{},onClick:function(a){this.ownerModule()._actRedo()}},{_riaswType:"riasw.form.TextBox",_riaswIdInModule:"currentVersion",label:"\u7248\u672c",labelWidth:"2.5em",showLabel:!0,tooltip:"\u5f53\u524d\u7248\u672c",readOnly:!0,style:{"line-height":"2em",height:"2em",width:"6.5em"}},{_riaswType:"riasw.sys.ToolbarLineBreak",_riaswIdInModule:"btnsRsf"},{_riaswType:"riasw.form.CheckButton",_riaswIdInModule:"_riasdRsfsEditorBtnMobileApp",label:e.veMobileApp,tooltip:e.veMobileApp,checked:!1,style:{},onCheckBusy:function(a){return!!this.ownerModule().riasdCurrentVe._riasdSaving},onChange:function(a){this.ownerModule()._actRsfChanged()}},{_riaswType:"riasw.form.ComboBox",_riaswIdInModule:"_riasdRsfsEditorBtnPix",label:e.vePixes,tooltip:e.vePixes,labelWidth:"2em",showLabel:!1,style:{"line-height":"2em",height:"2em",width:"9em"},value:e.vePixAuto,query:{},queryExpr:"${0}*",searchAttr:"text",store:{_riaswType:"riasw.store.MemoryStore",data:[{id:"auto",text:e.vePixAuto},{id:"self",text:e.vePixSelf},{id:"pix320x480",text:"320x480"},{id:"pix360x640",text:"360x640"},{id:"pix480x800",text:"480x800"},{id:"pix640x960",text:"640x960"},{id:"pix1280x720",text:"1280x720"},{id:"pix1024x768",text:"1024x768"},{id:"pix1366x768",text:"1366x768"},{id:"pix1440x900",text:"1440x900"},{id:"pix1920x1080",text:"1920x1080"}]},onCheckBusy:function(a){return!!this.ownerModule().riasdCurrentVe._riasdSaving},onChange:function(a){this.ownerModule()._actRsfChanged()}},{_riaswType:"riasw.form.CheckButton",_riaswIdInModule:"_riasdRsfsEditorBtnRotate",label:e.veRotate,tooltip:e.veRotate,checked:!1,style:{},onCheckBusy:function(a){return!!this.ownerModule().riasdCurrentVe._riasdSaving},onChange:function(a){this.ownerModule()._actRsfChanged()}},{_riaswType:"riasw.form.CheckButton",_riaswIdInModule:"btnModuleJs",label:e.moduleJs,tooltip:e.moduleJs,checked:!1,disabled:!0,onChange:function(a){this.ownerModule()._actToggleModuleJs(this.get("checked"))}},{_riaswType:"riasw.sys.ToolbarLineBreak",_riaswIdInModule:"btnsWidget"},{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnRefresh",showLabel:!1,label:e.outlineRefresh,tooltip:e.outlineRefresh,iconClass:"refreshIcon",onCheckBusy:function(a){return!!this.ownerModule().riasdCurrentVe._riasdOutlineLoading},onClick:function(a){this.ownerModule().reloadOutline()}},{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnCut",showLabel:!1,label:e.outlineCut,tooltip:e.outlineCut,iconClass:"cutIcon",disabled:!0,onClick:function(a){a=this.ownerModule();a._checkCurrent(a.btnCut)&&a._modiWidget("cut")}},{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnCopy",showLabel:!1,label:e.outlineCopy,tooltip:e.outlineCopy,iconClass:"copyIcon",disabled:!0,onClick:function(a){a=this.ownerModule();a._checkCurrent(a.btnCopy)&&a._modiWidget("copy")}},{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnPaste",showLabel:!1,label:e.outlinePaste,tooltip:"\u7c98\u8d34\u4e3a\u4e0b\u7ea7",iconClass:"pasteIcon",disabled:!0,onClick:function(a){a=this.ownerModule();a._checkCurrent(a.btnPaste)&&a._modiWidget("paste")}},{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnUp",showLabel:!1,label:e.outlineMoveUp,tooltip:e.outlineMoveUp,iconClass:"upIcon",disabled:!0,onClick:function(a){a=this.ownerModule();a._checkCurrent(a.btnUp)&&a._modiWidget("up")}},{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnDown",showLabel:!1,label:e.outlineMoveDown,tooltip:e.outlineMoveDown,iconClass:"downIcon",disabled:!0,onClick:function(a){a=this.ownerModule();a._checkCurrent(a.btnDown)&&a._modiWidget("down")}},{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnAdd",showLabel:!1,label:e.outlineAdd,tooltip:e.outlineAdd,iconClass:"addIcon",disabled:!0,onClick:function(a){this.ownerModule()._actAdd()}},{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnDelete",showLabel:!1,label:e.outlineDele,tooltip:e.outlineDele,iconClass:"deleIcon",disabled:!0,onClick:function(a){this.ownerModule()._actDele()}},{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnModi",showLabel:!1,label:e.outlineModi,tooltip:e.outlineModi,iconClass:"modiIcon",disabled:!0,onClick:function(a){this.ownerModule()._actModi()}}]},{_riaswType:"riasw.layout.TablePanel",_riaswIdInModule:"edts",layoutPriority:5,name:"edts",region:"top",cols:1,childParams:{labelWidth:"6em",showLabel:!0},childStyle:{"line-height":"2em",height:"2em",width:"100%"},cellStyle:{padding:"1px"},style:{"vertical-align":"middle","border-width":"0px","border-bottom-width":"1px",padding:"4px 1px"},_riaswElements:[{_riaswType:"riasw.form.TextBox",_riaswIdInModule:"edtId",name:"id",label:e.widgetId,readOnly:!0,rc:{col:1,row:1},style:{}},{_riaswType:"riasw.form.ButtonBox",_riaswIdInModule:"edtRiaswType",name:"_riaswType",label:e.widgetType,tooltip:e.widgetType,readOnly:!0,editable:!1,rc:{col:1,row:2},style:{},isLoaded:function(){return!1},onLoadDropDown:function(){return this.dropDown={dialogType:"modal",actionType:"edit",actionBarPosition:"top",popupArgs:{parent:this.ownerModule().riasdCurrentVe},caption:"\u6539\u53d8_riaswType",style:{"min-width":"25em","min-height":"40em",width:"31em",height:"70%"},moduleMeta:F,onSubmit:function(a){var c=this,d=this.ownerModule(),f;return(a=this.get("submitValue"))?b.requireRiaswCtor(a,function(a){f+=a}).then(function(a){return f?(b.error(f,c,c.btnSubmit),!1):d._actModiTypeOrId(d.edtRiaswIdInModule.get("value"),a.prototype.declaredClass,c,c.btnSubmit)},function(a){b.error(f,c,c.btnSubmit);return!1}):!1}}}},{_riaswType:"riasw.form.ButtonBox",_riaswIdInModule:"edtRiaswIdInModule",name:"_riaswIdInModule",label:e.widgetIdOfModule,tooltip:e.widgetIdOfModule,readOnly:!0,editable:!1,rc:{col:1,row:3},isLoaded:function(){return!1},onLoadDropDown:function(){return this.dropDown={dialogType:"modal",actionType:"edit",caption:"\u4fee\u6539_riaswIdInModule",moduleMeta:"riasw/module/input",popupArgs:{parent:this.ownerModule().riasdCurrentVe},onSubmit:function(a){a=this.ownerModule();return a._actModiTypeOrId(this.get("submitValue"),a.edtRiaswType.get("value"),this,this.btnSubmit)}}}}]},{_riaswType:d,_riaswIdInModule:"outline",persist:!0,region:"center",style:{padding:"1px"},model:{rootId:"root",rootLabel:"\u7ed3\u6784"},onSelectItems:function(a,d){var c=this.ownerModule();c.currentWidgetEditor&&c.currentWidgetEditor.contentLoaded&&c.currentWidgetEditor.saveCurrentEdtsState();c.setCurrentWidget(a&&a[0]?b.isArray(a[0].__riasrWidget)?a[0].__riasrWidget[0]:a[0].__riasrWidget:void 0)}}]}]},region:"center",afterParse:function(a){this.inheritedMeta(arguments);this.ownerModule()._dbindOE.resolve(a)}}]}]}]}})},"riasd/riasdMetas":function(){define("rias/riasBase dojo/i18n!riasd/nls/riasdMetasI18n riasd/editorMetas riasd/formMetas riasd/gridMetas riasd/layoutMetas riasd/mobileMetas riasd/sysMetas riasd/treeMetas riasd/widgetMetas".split(" "),function(b,a,e,d,p,q,t,z,m,u){var x;try{x={"riasw.store.MemoryStore":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!0,isPaletteItem:!0,iconClass48:"riaswMemoryStoreIcon48",iconClass16:"riaswMemoryStoreIcon16",caption:a["riasw.store.MemoryStore"].caption,description:a["riasw.store.MemoryStore"].description},"riasw.store.JsonXhrStore":{category:"sys",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswXhrStoreIcon48",iconClass16:"riaswXhrStoreIcon16",caption:a["riasw.store.JsonXhrStore"].caption,description:a["riasw.store.JsonXhrStore"].description}}}catch(k){console.error(k)}return b.mixinDeep({},e,d,p,q,t,z,x,m,u)})},"riasd/formMetas":function(){define(["rias/riasBase","dojo/i18n!riasd/nls/formMetasI18n"],function(b,a){var e;try{e={"riasw.form.ValidationTextBox":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswValidationTextBoxIcon48",iconClass16:"riaswValidationTextBoxIcon16",caption:a["riasw.form.ValidationTextBox"].caption,description:a["riasw.form.ValidationTextBox"].description},"riasw.form.TextBox":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswTextBoxIcon48",iconClass16:"riaswTextBoxIcon16",caption:a["riasw.form.TextBox"].caption,description:a["riasw.form.TextBox"].description},"riasw.form.NumberTextBox":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswNumberTextBoxIcon48",iconClass16:"riaswNumberTextBoxIcon16",caption:a["riasw.form.NumberTextBox"].caption,description:a["riasw.form.NumberTextBox"].description},"riasw.form.CurrencyTextBox":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswCurrencyTextBoxIcon48",iconClass16:"riaswCurrencyTextBoxIcon16",caption:a["riasw.form.CurrencyTextBox"].caption,description:a["riasw.form.CurrencyTextBox"].description},"riasw.form.ButtonBox":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswButtonBoxIcon48",iconClass16:"riaswButtonBoxIcon16",caption:a["riasw.form.ButtonBox"].caption,description:a["riasw.form.ButtonBox"].description},"riasw.form.ComboBox":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswComboBoxIcon48",iconClass16:"riaswComboBoxIcon16",caption:a["riasw.form.ComboBox"].caption,description:a["riasw.form.ComboBox"].description},"riasw.form.MultiComboBox":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswMultiComboBoxIcon48",iconClass16:"riaswMultiComboBoxIcon16",caption:a["riasw.form.MultiComboBox"].caption,description:a["riasw.form.MultiComboBox"].description},"riasw.form.FilteringSelect":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswFilteringSelectIcon48",iconClass16:"riaswFilteringSelectIcon16",caption:a["riasw.form.FilteringSelect"].caption,description:a["riasw.form.FilteringSelect"].description},"riasw.form.Select":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!1,iconClass48:"riaswSelectIcon48",iconClass16:"riaswSelectIcon16",caption:a["riasw.form.Select"].caption,description:a["riasw.form.Select"].description},"riasw.form.CheckedMultiSelect":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswCheckedMultiSelectIcon48",iconClass16:"riaswCheckedMultiSelectIcon16",caption:a["riasw.form.CheckedMultiSelect"].caption,description:a["riasw.form.CheckedMultiSelect"].description},"riasw.form.Button":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswButtonIcon48",iconClass16:"riaswButtonIcon16",caption:a["riasw.form.Button"].caption,description:a["riasw.form.Button"].description},"riasw.form.Switch":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswSwitchIcon48",iconClass16:"riaswSwitchIcon16",caption:a["riasw.form.Switch"].caption,description:a["riasw.form.Switch"].description},"riasw.form.ToggleButton":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswToggleButtonIcon48",iconClass16:"riaswToggleButtonIcon16",caption:a["riasw.form.ToggleButton"].caption,description:a["riasw.form.ToggleButton"].description},"riasw.form.CheckBox":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!1,iconClass48:"riaswCheckBoxIcon48",iconClass16:"riaswCheckBoxIcon16",caption:a["riasw.form.CheckBox"].caption,description:a["riasw.form.CheckBox"].description},"riasw.form.CheckButton":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswCheckButtonIcon48",iconClass16:"riaswCheckButtonIcon16",caption:a["riasw.form.CheckButton"].caption,description:a["riasw.form.CheckButton"].description},"riasw.form.TriStateCheckBox":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswTriStateCheckBoxIcon48",iconClass16:"riaswTriStateCheckBoxIcon16",caption:a["riasw.form.TriStateCheckBox"].caption,description:a["riasw.form.TriStateCheckBox"].description},"riasw.form.RadioBox":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!1,iconClass48:"riaswRadioButtonIcon48",iconClass16:"riaswRadioButtonIcon16",caption:a["riasw.form.RadioBox"].caption,description:a["riasw.form.RadioBox"].description},"riasw.form.RadioButton":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswRadioButtonIcon48",iconClass16:"riaswRadioButtonIcon16",caption:a["riasw.form.RadioButton"].caption,description:a["riasw.form.RadioButton"].description},"riasw.form.DropDownButton":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswDropDownButtonIcon48",iconClass16:"riaswDropDownButtonIcon16",caption:a["riasw.form.DropDownButton"].caption,description:a["riasw.form.DropDownButton"].description},"riasw.form.ComboButton":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswComboButtonIcon48",iconClass16:"riaswComboButtonIcon16",caption:a["riasw.form.ComboButton"].caption,description:a["riasw.form.ComboButton"].description},"riasw.form.NumberSpinner":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswNumberSpinnerIcon48",iconClass16:"riaswNumberSpinnerIcon16",caption:a["riasw.form.NumberSpinner"].caption,description:a["riasw.form.NumberSpinner"].description},"riasw.form.TimeSpinner":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswTimeSpinnerIcon48",iconClass16:"riaswTimeSpinnerIcon16",caption:a["riasw.form.TimeSpinner"].caption,description:a["riasw.form.TimeSpinner"].description},"riasw.form.DayTextBox":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswDayTextBoxIcon48",iconClass16:"riaswDayTextBoxIcon16",caption:a["riasw.form.DayTextBox"].caption,description:a["riasw.form.DayTextBox"].description},"riasw.form.DateTextBox":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswDateTextBoxIcon48",iconClass16:"riaswDateTextBoxIcon16",caption:a["riasw.form.DateTextBox"].caption,description:a["riasw.form.DateTextBox"].description},"riasw.form.TimeTextBox":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswTimeTextBoxIcon48",iconClass16:"riaswTimeTextBoxIcon16",caption:a["riasw.form.TimeTextBox"].caption,description:a["riasw.form.TimeTextBox"].description},"riasw.form.Uploader":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswUploaderIcon48",iconClass16:"riaswUploaderIcon16",caption:a["riasw.form.Uploader"].caption,description:a["riasw.form.Uploader"].description},"riasw.form.TextArea":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswTextAreaIcon48",iconClass16:"riaswTextAreaIcon16",caption:a["riasw.form.TextArea"].caption,description:a["riasw.form.TextArea"].description},"riasw.form.ProgressBar":{category:["form"],isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswProgressBarIcon48",iconClass16:"riaswProgressBarIcon16",caption:a["riasw.form.ProgressBar"].caption,description:a["riasw.form.ProgressBar"].description},"riasw.form.Rating":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswRatingIcon48",iconClass16:"riaswRatingIcon16",caption:a["riasw.form.Rating"].caption,description:a["riasw.form.Rating"].description},"riasw.form.SimpleSlider":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswSliderIcon48",iconClass16:"riaswSliderIcon16",caption:a["riasw.form.SimpleSlider"].caption,description:a["riasw.form.SimpleSlider"].description},"riasw.form.SliderRule":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswSliderRuleIcon48",iconClass16:"riaswSliderRuleIcon16",caption:a["riasw.form.SliderRule"].caption,description:a["riasw.form.SliderRule"].description},"riasw.form.SliderLabels":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswSliderLabelsIcon48",iconClass16:"riaswSliderLabelsIcon16",caption:a["riasw.form.SliderLabels"].caption,description:a["riasw.form.SliderLabels"].description},"riasw.form.HSlider":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswHSliderIcon48",iconClass16:"riaswHSliderIcon16",caption:a["riasw.form.HSlider"].caption,description:a["riasw.form.HSlider"].description},"riasw.form.VSlider":{category:"form",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswVSliderIcon48",iconClass16:"riaswVSliderIcon16",caption:a["riasw.form.VSlider"].caption,description:a["riasw.form.VSlider"].description},"riasw.form.ColorPalette":{category:"form",isDesktop:!0,isMobile:!1,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswColorPaletteIcon48",iconClass16:"riaswColorPaletteIcon16",caption:a["riasw.form.ColorPalette"].caption,description:a["riasw.form.ColorPalette"].description},"riasw.form.ColorPicker":{category:"form",isDesktop:!0,isMobile:!1,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswColorPaletteIcon48",iconClass16:"riaswColorPaletteIcon16",caption:a["riasw.form.ColorPicker"].caption,description:a["riasw.form.ColorPicker"].description}}}catch(d){console.error(d)}return e})},"riasd/mobileMetas":function(){define(["rias/riasBase","dojo/i18n!riasd/nls/mobileMetasI18n"],function(b,a){var e;try{e={"riasw.mobile.Button":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswButtonIcon48",iconClass16:"riaswButtonIcon16",caption:a["riasw.mobile.Button"].caption,description:a["riasw.mobile.Button"].description},"riasw.mobile.ToggleButton":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswToggleButtonIcon48",iconClass16:"riaswToggleButtonIcon16",caption:a["riasw.mobile.ToggleButton"].caption,description:a["riasw.mobile.ToggleButton"].description},"riasw.mobile.Switch":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswSwitchIcon48",iconClass16:"riaswSwitchIcon16",caption:a["riasw.mobile.Switch"].caption,description:a["riasw.mobile.Switch"].description},"riasw.mobile.TextBox":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswTextBoxIcon48",iconClass16:"riaswTextBoxIcon16",caption:a["riasw.mobile.TextBox"].caption,description:a["riasw.mobile.TextBox"].description},"riasw.mobile.TextArea":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswTextAreaIcon48",iconClass16:"riaswTextAreaIcon16",caption:a["riasw.mobile.TextArea"].caption,description:a["riasw.mobile.TextArea"].description},"riasw.mobile.ComboBox":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswComboBoxIcon48",iconClass16:"riaswComboBoxIcon16",caption:a["riasw.mobile.ComboBox"].caption,description:a["riasw.mobile.ComboBox"].description},"riasw.mobile.SearchBox":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswSearchBoxIcon48",iconClass16:"riaswSearchBoxIcon16",caption:a["riasw.mobile.SearchBox"].caption,description:a["riasw.mobile.SearchBox"].description},"riasw.mobile.CheckBox":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswCheckBoxIcon48",iconClass16:"riaswCheckBoxIcon16",caption:a["riasw.mobile.CheckBox"].caption,description:a["riasw.mobile.CheckBox"].description},"riasw.mobile.RadioButton":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswRadioButtonIcon48",iconClass16:"riaswRadioButtonIcon16",caption:a["riasw.mobile.RadioButton"].caption,description:a["riasw.mobile.RadioButton"].description},"riasw.mobile.SpinWheel":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswSpinWheelIcon48",iconClass16:"riaswSpinWheelIcon16",caption:a["riasw.mobile.SpinWheel"].caption,description:a["riasw.mobile.SpinWheel"].description},"riasw.mobile.ProgressIndicator":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswProgressIndicatorIcon48",iconClass16:"riaswProgressIndicatorIcon16",caption:a["riasw.mobile.ProgressIndicator"].caption,description:a["riasw.mobile.ProgressIndicator"].description},"riasw.mobile.ProgressBar":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswProgressBarIcon48",iconClass16:"riaswProgressBarIcon16",caption:a["riasw.mobile.ProgressBar"].caption,description:a["riasw.mobile.ProgressBar"].description},"riasw.mobile.View":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswViewIcon48",iconClass16:"riaswViewIcon16",caption:a["riasw.mobile.View"].caption,description:a["riasw.mobile.View"].description},"riasw.mobile.ScrollableView":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswScrollableViewIcon48",iconClass16:"riaswScrollableViewIcon16",caption:a["riasw.mobile.ScrollableView"].caption,description:a["riasw.mobile.ScrollableView"].description},"riasw.mobile.SwapView":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswSwapViewIcon48",iconClass16:"riaswSwapViewIcon16",caption:a["riasw.mobile.SwapView"].caption,description:a["riasw.mobile.SwapView"].description},"riasw.mobile.ListItem":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswListItemIcon48",iconClass16:"riaswListItemIcon16",caption:a["riasw.mobile.ListItem"].caption,description:a["riasw.mobile.ListItem"].description},"riasw.mobile.Heading":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswHeadingIcon48",iconClass16:"riaswHeadingIcon16",caption:a["riasw.mobile.Heading"].caption,description:a["riasw.mobile.Heading"].description},"riasw.mobile.PageIndicator":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswPageIndicatorIcon48",iconClass16:"riaswPageIndicatorIcon16",caption:a["riasw.mobile.Heading"].caption,description:a["riasw.mobile.Heading"].description},"riasw.mobile.TabBar":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswTabBarIcon48",iconClass16:"riaswTabBarIcon16",caption:a["riasw.mobile.TabBar"].caption,description:a["riasw.mobile.TabBar"].description},"riasw.mobile.TabBarButton":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswTabBarButtonIcon48",iconClass16:"riaswTabBarButtonIcon16",caption:a["riasw.mobile.TabBarButton"].caption,description:a["riasw.mobile.TabBarButton"].description},"riasw.mobile.IconContainer":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswIconContainerIcon48",iconClass16:"riaswIconContainerIcon16",caption:a["riasw.mobile.IconContainer"].caption,description:a["riasw.mobile.IconContainer"].description},"riasw.mobile.IconItem":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswIconItemIcon48",iconClass16:"riaswIconItemIcon16",caption:a["riasw.mobile.IconItem"].caption,description:a["riasw.mobile.IconItem"].description},"riasw.mobile.ToolBarButton":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswToolBarButtonIcon48",iconClass16:"riaswToolBarButtonIcon16",caption:a["riasw.mobile.ToolBarButton"].caption,description:a["riasw.mobile.ToolBarButton"].description},"riasw.mobile.EdgeToEdgeList":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswEdgeToEdgeListIcon48",iconClass16:"riaswEdgeToEdgeListIcon16",caption:a["riasw.mobile.EdgeToEdgeList"].caption,description:a["riasw.mobile.EdgeToEdgeList"].description},"riasw.mobile.EdgeToEdgeStoreList":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswEdgeToEdgeStoreListIcon48",iconClass16:"riaswEdgeToEdgeStoreListIcon16",caption:a["riasw.mobile.EdgeToEdgeStoreList"].caption,description:a["riasw.mobile.EdgeToEdgeStoreList"].description},"riasw.mobile.EdgeToEdgeCategory":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswEdgeToEdgeCategoryIcon48",iconClass16:"riaswEdgeToEdgeCategoryIcon16",caption:a["riasw.mobile.EdgeToEdgeCategory"].caption,description:a["riasw.mobile.EdgeToEdgeCategory"].description},"riasw.mobile.RoundRectList":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswRoundRectListIcon48",iconClass16:"riaswRoundRectListIcon16",caption:a["riasw.mobile.RoundRectList"].caption,description:a["riasw.mobile.RoundRectList"].description},"riasw.mobile.RoundRectStoreList":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswRoundRectStoreListIcon48",iconClass16:"riaswRoundRectStoreListIcon16",caption:a["riasw.mobile.RoundRectStoreList"].caption,description:a["riasw.mobile.RoundRectStoreList"].description},"riasw.mobile.RoundRectCategory":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswRoundRectCategoryIcon48",iconClass16:"riaswRoundRectCategoryIcon16",caption:a["riasw.mobile.RoundRectCategory"].caption,description:a["riasw.mobile.RoundRectCategory"].description},"riasw.mobile.Tooltip":{category:"mobile",isDesktop:!0,isMobile:!0,isTesting:!1,iconClass48:"riaswTooltipIcon48",iconClass16:"riaswTooltipIcon16",caption:a["riasw.mobile.Tooltip"].caption,description:a["riasw.mobile.Tooltip"].description}}}catch(d){console.error(d)}return e})},"riasd/sys/WidgetPalette":function(){define("riasw/riaswBase dojo/_base/event dojo/on dojo/dnd/Selector riasw/sys/_WidgetBase riasw/layout/Panel riasw/layout/AccordionPanel".split(" "),function(b,a,e,d,p,q,t){function z(a){var d=[],e,k,p,m,q=b.getRiaswMetas();for(e in q){k=q[e];m=!0;for(p in a)if(k.hasOwnProperty(p)){if(k[p]!==a[p]){m=!1;break}}else{m=!1;break}m&&(k.riaswType=e,d.push(k))}return d}var m=b.dom,u=b.declare("riasw.sys.WidgetPaletteItem",[p],{iconUrl:"",caption:"",description:"",riaswType:"",category:"",palette:null,template:'\x3cspan class\x3d"riaswWidgetPaletteItemContainer"\x3e\x3cspan class\x3d"riaswWidgetPaletteItemImageContainer"\x3e\x3cimg class\x3d"riaswWidgetPaletteItemImage" border\x3d"0"/\x3e\x3c/span\x3e\x3cspan class\x3d"riaswWidgetPaletteItemLabelContainer"\x3e\x3cspan class\x3d"riaswWidgetPaletteItemLabel"\x3e\x3c/span\x3e\x3c/span\x3e\x3c/span\x3e',_paletteItemGroup:null,_paletteItemMoreConnects:[],_paletteItemHelpConnects:[],buildRendering:function(){if(this.palette){var a=this.domNode=m.create("div",{className:"riaswWidgetPaletteItem"});a.innerHTML=this.template;a._paletteItem=this;m.setAttr(a,"selType",this.riaswType);a=a.firstChild;m.setAttr(a,"tabIndex","0");a.onclick=function(){return!1};var d=a.querySelector("img");d&&(this.iconClass48?m.addClass(d,this.iconClass48):d.src=b.toUrl(this.iconUrl));a=a.querySelector(".riaswWidgetPaletteItemLabel");a.appendChild(m.doc.createTextNode(this.caption));var d=m.html.entities.encode(b.has("ie")?a.outerText:a.textContent),e;for(e=d.length-1;0<e;e--)b.contains("_-",d[e])?(d=d.substr(0,e+1)+"\x26#8203;"+d.substr(e+1),a.innerHTML=d):d[e].toLowerCase()!==d[e]&&(d=d.substr(0,e)+"\x26#8203;"+d.substr(e),a.innerHTML=d);this.domNode.componentClassName=this.riaswType;m.setSelectable(this.domNode,!1)}else console.error('The paletteitem of "'+this.params.riaswType+'" must have a parent palette.')},postCreate:function(){this.inherited(arguments);this._collectionName="";this.isDesktop&&(this._collectionName+=", "+b.i18n.riasd.isDesktop);this.isMobile&&(this._collectionName+=", "+b.i18n.riasd.isMobile);this.isTesting&&(this._collectionName+=", "+b.i18n.riasd.isTesting);this._collectionName&&(this._collectionName=this._collectionName.substring(2));this.on(this.domNode,"mouseover","itemMouseOverHandler");this.on(this.domNode,"mouseout","itemMouseOutHandler");this.on(this.domNode,"mousedown","itemMouseDownHandler");this.on(this.domNode,"mouseup","itemMouseUpHandler");this.on(this.domNode,"keydown","itemKeyDownHandler")},itemMouseOverHandler:function(a){this._mouseover=!0;this.select()||this.raised(!0);setTimeout(function(){if(this._mouseover&&0===this.palette.moreItems.length&&this._tooltipNode!==this.domNode&&(this._tooltipNode&&b.hideTooltip(this._tooltipPos),this._tooltipNode=this.domNode)){this._tooltipPos=m.getPosition(this.domNode,!0);var a="\x3cdiv\x3e"+m.html.entities.encode(this.description)+'\x3c/div\x3e \x3cdiv"\x3e('+this._collectionName+")\x3c/div\x3e";b.popTooltip({content:a,around:this._tooltipPos});setTimeout(function(){b.hideTooltip(this._tooltipPos);this._tooltipPos=this._tooltipNode=null}.bind(this),5E3)}}.bind(this),750)},itemMouseOutHandler:function(a){this._mouseover=!1;this._tooltipPos&&(b.hideTooltip(this._tooltipPos),this._tooltipPos=this._tooltipNode=null);this.raised(!1)},itemMouseDownHandler:function(a){this.focus()},itemMouseUpHandler:function(a){this.select()||this.palette.removeSelectionAll();this.select(!0)},itemKeyDownHandler:function(a){a.keyCode===b.keys.ENTER&&(this.palette.removeSelectionAll(),this.select(!0))},_raised:!1,raised:function(a){if(void 0===a||null===a||a===this._raised)return this._raised;this._raised=a;if(!this._raised)return a=b.indexOf(this.palette.raisedItems,this),0<=a&&this.palette.raisedItems.splice(a,1),m.removeClass(this.domNode,"riaswWidgetPaletteItemRaised"),this.select()||m.addClass(this.domNode,"riaswWidgetPaletteItemFlat"),this._raised;m.removeClass(this.domNode,"riaswWidgetPaletteItemFlat");m.addClass(this.domNode,"riaswWidgetPaletteItemRaised");this.palette.raisedItems.push(this);return this._raised},selected:!1,select:function(a){if(void 0==a||a===this.selected)return this.selected;this.selected=!!a;if(!this.selected)return a=b.indexOf(this.palette.selectedItems,this),0<=a&&(this.palette.selectedItems.splice(a,1),this.palette.onSelect(this)),m.removeClass(this.domNode,"riaswWidgetPaletteItemSelect riaswWidgetPaletteItemSunken"),this.selected;this.raised(!1);m.addClass(this.domNode,"riaswWidgetPaletteItemSelect riaswWidgetPaletteItemSunken");this.palette.selectedItems.push(this);this.palette.onSelect(this);return this.selected},paletteItemMoreCloseCleanup:function(){var a;if(this._moreShowing){for(a=0;a<this._paletteItemMoreConnects.length;a++)this._paletteItemMoreConnects[a].remove();this._paletteItemMoreConnects=[];a=b.indexOf(this.palette.moreItems,this);0<=a&&this.palette.moreItems.splice(a,1)}this._moreShowing=!1}}),x={sys:0,layout:1,form:2,widet:3,mobile:4,store:5};a=b.declare("riasw.sys.WidgetPalette",[q],{paletteItems:{},raisedItems:[],selectedItems:[],moreItems:[],dndCtor:d,buildRendering:function(){this.inherited(arguments);m.addClass(this.domNode,"riaswWidgetPalette")},postCreate:function(){this.inherited(arguments);this._dndController=new this.dndCtor(this.domNode,this.dndParams)},_onDestroy:function(){this._categoryOwner&&(this._categoryOwner.destroy(),this._categoryOwner=null);this.paletteItems={};this._dndController&&(b.destroy(this._dndController),this._dndController=void 0);this.inherited(arguments)},_getCategory:function(a){a=a.replace(/\./g,"_");this._categoryOwner||(this._categoryOwner=b.newRiasw(t,{ownerRiasw:this,id:this.id+"_categoryOwner",region:"center",style:{padding:"0px"}}),this._categoryOwner._categoryList={},this._categoryOwner.placeAt(this));if(!b.getObject(a,!1,this._categoryOwner._categoryList)){var d=b.newRiasw(q,{ownerRiasw:this,_riaswIdInModule:"_category"+b.upperCaseFirst(a),id:this.id+"_category_"+a,region:"center",style:{padding:"0px"},caption:a,extractContent:"false",preventCache:"false",preload:"false",refreshOnShow:"false",_riaswElements:[]});m.addClass(d.domNode,"riaswWidgetPaletteCategory");this._categoryOwner.own(d);b.setObject(a,d,this._categoryOwner._categoryList);d.placeAt(this._categoryOwner,x[a])}return b.getObject(a,!1,this._categoryOwner._categoryList)},_createPaletteItem:function(a){var d=this,e=[],k=1,p,m;a.isPaletteItem&&(e=b.isArray(a.riaswType)?a.riaswType.concat():[a.riaswType],b.forEach(e,function(e){b.getObject(e,!1,d.paletteItems)||(1!==k&&p||(a.palette=d,a.riaswType=e,b.forEach(b.isArray(a.category)?a.category:[a.category],function(k){m=d._getCategory(k);p=b.newRiasw(u,b.mixin({ownerRiasw:d,_riaswIdInModule:b.rt.getUniqueId(b.rt._getUniqueCat(e),d.ownerModule())},a));p.placeAt(m)})),b.setObject(e,p,d.paletteItems),++k)}))},_createPalette:function(a,d){var e=this;d||(e.removeSelectionAll(),e._categoryOwner&&(e._categoryOwner.destroy(),e._categoryOwner=null),e.paletteItems={});a||(a={});a.isPaletteItem=!0;var k=z(a);b.forEach(k,b.hitch(e,function(a){e._createPaletteItem(a)}))},loadPalette:function(a,b,d){this._loaded=void 0;this._createPalette(b,d);this._loaded=!0},refresh:function(){this._loaded=void 0;this.loadPalette()},_filter:function(a){return null},_getPaletteItemsSameGroup:function(a){return[]},removeSelectionAll:function(){for(var a;this.selectedItems.length;)a=this.selectedItems[0],a.select(!1);for(;this.raisedItems.length;)a=this.raisedItems[0],a.raised(!1)},onSelect:function(a){},onDragStart:function(a){this.removeSelectionAll()},onDragEnd:function(a){this.removeSelectionAll()},onDragMove:function(a){},nop:function(){return!1}});a._riasdMeta={visual:!0,initialSize:{},property:{}};return a})},"riasd/layoutMetas":function(){define(["rias/riasBase","dojo/i18n!riasd/nls/layoutMetasI18n"],function(b,a){var e;try{e={"riasw.layout.Panel":{category:"layout",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswPaneIcon48",iconClass16:"riaswPaneIcon16",caption:a["riasw.layout.Panel"].caption,description:a["riasw.layout.Panel"].description},"riasw.layout.ContentPanel":{category:"layout",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswPaneIcon48",iconClass16:"riaswPaneIcon16",caption:a["riasw.layout.ContentPanel"].caption,description:a["riasw.layout.ContentPanel"].description},"riasw.layout.CaptionPanel":{category:"layout",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswCaptionPanelIcon48",iconClass16:"riaswCaptionPanelIcon16",caption:a["riasw.layout.CaptionPanel"].caption,description:a["riasw.layout.CaptionPanel"].description},"riasw.layout.Fieldset":{category:"layout",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswFieldsetIcon48",iconClass16:"riaswFieldsetIcon16",caption:a["riasw.layout.Fieldset"].caption,description:a["riasw.layout.Fieldset"].description},"riasw.layout.TablePanel":{category:"layout",isDesktop:!0,isMobile:!1,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswTablePanelIcon48",iconClass16:"riaswTablePanelIcon16",caption:a["riasw.layout.TablePanel"].caption,description:a["riasw.layout.TablePanel"].description},"riasw.layout.DockBar":{category:"layout",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswDockBarIcon48",iconClass16:"riaswDockBarIcon16",caption:a["riasw.layout.DockBar"].caption,description:a["riasw.layout.DockBar"].description},"riasw.layout.AccordionPanel":{category:"layout",isDesktop:!0,isMobile:!1,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswAccordionPanelIcon48",iconClass16:"riaswAccordionPanelIcon16",caption:a["riasw.layout.AccordionPanel"].caption,description:a["riasw.layout.AccordionPanel"].description},"riasw.layout.TabPanel":{category:"layout",isDesktop:!0,isMobile:!1,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswTabPanelIcon48",iconClass16:"riaswTabPanelIcon16",caption:a["riasw.layout.TabPanel"].caption,description:a["riasw.layout.TabPanel"].description},"riasw.layout.StackPanel":{category:"layout",isDesktop:!0,isMobile:!0,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswStackPanelIcon48",iconClass16:"riaswStackPanelIcon16",caption:a["riasw.layout.StackPanel"].caption,description:a["riasw.layout.StackPanel"].description}}}catch(d){console.error(d)}return e})},"riasd/widgetMetas":function(){define(["rias/riasBase","dojo/i18n!riasd/nls/widgetMetasI18n"],function(b,a){var e;try{e={"riasw.widget.Audio":{category:"widget",isDesktop:!0,isMobile:!1,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswAudioIcon48",iconClass16:"riaswAudioIcon16",caption:a["riasw.widget.Audio"].caption,description:a["riasw.widget.Audio"].description},"riasw.widget.Video":{category:"widget",isDesktop:!0,isMobile:!1,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswVideoIcon48",iconClass16:"riaswVideoIcon16",caption:a["riasw.widget.Video"].caption,description:a["riasw.widget.Video"].description},"riasw.widget.Calendar":{category:"widget",isDesktop:!0,isMobile:!1,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswCalendarIcon48",iconClass16:"riaswCalendarIcon16",caption:a["riasw.widget.Calendar"].caption,description:a["riasw.widget.Calendar"].description},"riasw.widget.CalendarX":{category:"widget",isDesktop:!0,isMobile:!1,isTesting:!1,isPaletteItem:!0,iconClass48:"riaswCalendarIcon48",iconClass16:"riaswCalendarIcon16",caption:a["riasw.widget.CalendarX"].caption,description:a["riasw.widget.CalendarX"].description}}}catch(d){console.error(d)}return e})},"riasd/module/fileSelector":function(){define(["riasw/riaswBase","dojo/i18n!riasd/nls/riasdI18n"],function(b,a){var e={_riaswVersion:"0.7",caption:a.fileSelector,tooltip:a.fileSelector+"\x3cbr/\x3eIE11\u53ca\u4ee5\u4e0b\u7248\u672c\u53ea\u80fd\u4f7f\u7528\u90e8\u5206\u529f\u80fd",iconClass:"outlineIcon",initFocusedChild:"module.tree",rootId:"appmodule",onlyDir:!1,actions:{get:"act/riasd/getAppModule",newDir:"act/riasd/newAppModuleDir",newFile:"act/riasd/newAppModule",dele:"act/riasd/deleAppModule",upload:"act/riasd/uploadFile",download:"act/riasd/downloadFile"},minSize:{h:360,w:240},beforeParse:function(){var a=b.queryRiasdParams(this._riaswElements,"_riaswIdInModule","tree");0<a.length&&this.rootId&&(a[0].model.rootId=this.rootId,a[0].model.rootLabel="appmodule"===this.rootId?"\u9875\u9762\u6a21\u5757(app\u76ee\u5f55\u4e3a\u6846\u67b6\u6a21\u5757\uff0c\u4fee\u6539\u65f6\u52a1\u5fc5\u8c28\u614e\uff01)":"serveract"===this.rootId?"\u670d\u52a1\u5668Act":"\u672a\u77e5\u7c7b\u578b",a[0].model.query={onlyDir:this.onlyDir},a[0].model.store.target=this.actions.get)},afterParse:function(a){this.btnNewDir.set("visible",!!this.actions.newDir);this.btnNewFile.set("visible",!!this.actions.newFile);this.btnDelete.set("visible",!!this.actions.dele);this.btnDownload.set("visible",!!this.actions.download);this.btnUpload.set("visible",!!this.actions.upload);this.btnUpload.set("url",b.toUrl(this.actions.upload))},_setBtnState:function(a){this.contentLoaded&&!this.isDestroyed(!0)&&(a=a||this.tree.selectedItems[0],this.btnSubmit.set("disabled",!a||"file"!==a.itemType||!a.pathname.endWith(".js")),this.btnNewDir.set("disabled",!a||"file"===a.itemType),this.btnNewFile.set("disabled",!a||"folder"!==a.itemType),this.btnDelete.set("disabled",!a||!!a.root),this.btnDownload.set("disabled",!a||"file"!==a.itemType),this.btnUpload.set("disabled",!a||"file"===a.itemType))},onRestore:function(){this.refresh()},onHide:function(){this.tree&&this.tree.clear()},refresh:function(){this._setBtnState();return this.contentLoaded&&this.tree.load()},onSubmit:function(){var a=this.tree.selectedItems[0];this.set("submitValue",a);if(a){if("file"!==a.itemType||this.tree.model.mayHaveChildren(a)||!a.pathname.endWith(".js"))return!1}else return b.warn("\u8bf7\u9009\u62e9\u4e00\u4e2a\u6761\u76ee.",this,this.btnSubmit),!1},_newDir:function(){var a=this,e=a.tree.selectedItems[0],q,t;!e||"folder"!==e.itemType&&e!==a.tree.model.root?b.hint("\u8bf7\u9009\u62e9\u4e00\u4e2a\u76ee\u5f55...",a,a.btnNewDir):(q=e===a.tree.model.root?e.id:e.pathname,b.showInput({ownerRiasw:a,popupArgs:{around:a.btnNewDir},caption:b.i18n.action.newDir,onSubmit:function(){return b.xhr.post(a.actions.newDir,{pathname:q+"/"+this.get("submitValue"),dir:1},function(d){if(!d.success||1>d.success)return b.warn({ownerRiasw:a,parent:a,content:b.i18n.action.newDir+"\u5931\u8d25...",caption:a.caption}),!1;a.tree.load().then(function(d){b.isArray(d)&&(t=a.tree.getNodesByItem(d.pop())[0],a.tree.expandNode(t))});return!0})}}))},_newFile:function(){var a=this,e=a.tree.selectedItems[0],q,t;!e||"folder"!==e.itemType&&e!==a.tree.model.root?b.hint("\u8bf7\u9009\u62e9\u4e00\u4e2a\u76ee\u5f55...",a,a.btnNewFile):(q=e===a.tree.model.root?e.id:e.pathname,b.showInput({ownerRiasw:a,popupArgs:{around:a.btnNewFile},caption:b.i18n.action.newFile,onSubmit:function(){return b.xhr.post(a.actions.newFile,{pathname:q+"/"+this.get("submitValue"),dir:0},function(d){if(!d.success||1>d.success)return b.warn({ownerRiasw:a,parent:a,content:b.i18n.action.newFile+"\u5931\u8d25...",caption:a.caption}),!1;a.tree.load().then(function(d){b.isArray(d)&&(t=a.tree.getNodesByItem(d.pop())[0],a.tree.expandNode(t))});return!0})}}))},_dele:function(){var a=this,e=a.tree.selectedItems[0],q,t;e?(q=e===a.tree.model.root?e.id:e.pathname,b.choose({ownerRiasw:a,popupArgs:{around:a.btnDelete},content:"\u662f\u5426\u5220\u9664["+q+"]?",caption:b.i18n.action.dele,onSubmit:function(){b.xhr.post(a.actions.dele,{pathname:q,dir:"folder"===e.itemType?1:0},function(d){if(!d.success||1>d.success)return b.warn({ownerRiasw:a,parent:a,content:b.i18n.action.dele+"\u5931\u8d25...",caption:a.caption}),!1;t=a.tree.get("paths");t.length&&(t=t[0],t.pop());a.tree.load(t).then(function(){});return!0});return 1}})):b.hint("\u8bf7\u9009\u62e9\u4e00\u4e2a\u8282\u70b9...",a,a.btnDelete)},_download:function(){var a=this.tree.selectedItems[0];a&&(a=a===this.tree.model.root?a.id:a.pathname,b.xhr.open(this.actions.download,{pathname:a},!0,""))},_upload:function(){},_riaswElements:[{_riaswType:"riasw.layout.Panel",_riaswIdInModule:"main",region:"center",caption:"\u8d44\u6e90\u7ba1\u7406\u5668",design:"sidebar",style:{padding:"0px"},_riaswElements:[{_riaswType:"riasw.sys.Toolbar",_riaswIdInModule:"btns",region:"top",style:{"border-bottom":"1px solid lightgray",padding:"2px"},_riaswElements:[{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnRefresh",iconClass:"refreshIcon",label:b.i18n.action.refresh,tooltip:b.i18n.action.refresh,showLabel:!1,onClick:function(a){this.ownerModule().refresh()}},{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnSubmit",iconClass:"okIcon",label:{$refScript:"return module.btnOkLabel || rias.i18n.action.ok;"},tooltip:b.i18n.action.ok,showLabel:!0,disabled:!0,onClick:function(a){this.ownerModule().submit(a)}},{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnNewDir",iconClass:"newFolderIcon",label:b.i18n.action.newDir,tooltip:b.i18n.action.newDir,showLabel:!0,disabled:!0,onClick:function(a){this.ownerModule()._newDir()}},{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnNewFile",iconClass:"newFileIcon",label:b.i18n.action.newFile,tooltip:b.i18n.action.newFile,showLabel:!0,disabled:!0,onClick:function(a){this.ownerModule()._newFile()}},{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnDelete",iconClass:"deleIcon",label:b.i18n.action.dele,tooltip:b.i18n.action.dele,showLabel:!0,disabled:!0,onClick:function(a){this.ownerModule()._dele()}},{_riaswType:"riasw.sys.ToolbarLineBreak",_riaswIdInModule:"btnSplitter"},{_riaswType:"riasw.sys.ToolButton",_riaswIdInModule:"btnDownload",iconClass:"downloadIcon",label:b.i18n.action.download,tooltip:b.i18n.action.download,showLabel:!0,disabled:!0,onClick:function(a){this.ownerModule()._download()}},{_riaswType:"riasw.form.Uploader",_riaswIdInModule:"btnUpload",iconClass:"uploadIcon",label:b.i18n.action.upload,tooltip:b.i18n.action.upload,showLabel:!0,disabled:!0,accept:".js",onChange:function(a){var b=this.ownerModule(),d=b.tree.selectedItems[0];d&&(b=d===b.tree.model.root?d.id:d.pathname,a[0].pathname=b,this.upload(a[0]),this.reset())}}]},{_riaswType:"riasw.tree.Tree",_riaswIdInModule:"tree",persist:!0,autoFocusWhenSelectNode:!0,region:"center",loadRootOnStartup:!1,noDnd:!0,model:{_riaswType:"riasw.tree.TreeModel",rootId:"appmodule",rootLabel:"\u9875\u9762\u6a21\u5757",store:{_riaswType:"riasw.store.JsonXhrStore",idProperty:"pathname",labelProperty:"name"}},style:{padding:"0px"},onClick:function(a,b,e){this.ownerModule()._setBtnState()},onDblClick:function(a,b,e){var d=this.ownerModule();a&&"file"===a.itemType&&!d.tree.model.mayHaveChildren(a)&&d.defer(function(){d.submit(e)})}}]}]};b.setObject("riasd.module.fileSelector",e);return e})},"*now":function(b){b(['dojo/i18n!*preload*riasd/nls/main*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])}}});define("riasd/main",["riasw/riaswBase","dojo/i18n!riasd/nls/riasdI18n"],function(b,a){b.i18n.riasd=a;var e=b.getObject("riasd",!0);e._scopeName="riasd";dojo.scopeMap.riasd=["riasd",e];return e});