!function(){"use strict";function e(e,t,n,i,o,r){t[e]&&(n.push(e),(t[e]===!0||1===t[e])&&i.push(o+e+"/"+r))}function t(e,t,n,i,o){var r=i+t+"/"+o;require._fileExists(e.toUrl(r+".js"))&&n.push(r)}function n(e,t,i){var o;for(o in t)!t.hasOwnProperty(o)||e.hasOwnProperty(o)&&!i?"object"==typeof t[o]&&(!e[o]&&t[o]&&(e[o]={}),n(e[o],t[o],i)):e[o]=t[o]}var i=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(o){var r=o.config?o.config():{};return r=r||{},{version:"2.0.4",load:function(o,s,a,l){l=l||{},l.locale&&(r.locale=l.locale);var d,c,u,p=i.exec(o),h=p[1],f=p[4],g=p[5],m=f.split("-"),v=[],y={},E="";if(p[5]?(h=p[1],d=h+g):(d=o,g=p[4],f=r.locale,f||(f=r.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),m=f.split("-")),l.isBuild){for(v.push(d),t(s,"root",v,h,g),c=0;c<m.length;c++)u=m[c],E+=(E?"-":"")+u,t(s,E,v,h,g);if(l.locales){var w,S;for(w=0;w<l.locales.length;w++)for(f=l.locales[w],m=f.split("-"),E="",S=0;S<m.length;S++)u=m[S],E+=(E?"-":"")+u,t(s,E,v,h,g)}s(v,function(){a()})}else s([d],function(t){var i,o=[];for(e("root",t,o,v,h,g),c=0;c<m.length;c++)i=m[c],E+=(E?"-":"")+i,e(E,t,o,v,h,g);s(v,function(){var e,i,r;for(e=o.length-1;e>-1&&o[e];e--)r=o[e],i=t[r],(i===!0||1===i)&&(i=s(h+r+"/"+g)),n(y,i);a(y)})})}}})}(),define("orion/nls/messages",{root:!0}),define("orion/nls/root/messages",{Navigator:"Navigator",Sites:"Sites",Shell:"Shell","Get Plugins":"Get Plug-ins",Global:"Global",Editor:"Editor",EditorRelatedLink:"Show Current Folder",EditorRelatedLinkParent:"Show Enclosing Folder",EditorLinkWorkspace:"Edit",EditorRelatedLinkProj:"Show Project",sidebar:"Sidebar","Filter bindings":"Filter bindings",BindingPrompt:"Enter the new binding",NoBinding:"---",orionClientLabel:"Orion client repository","Orion Editor":"Text Editor","Orion Image Viewer":"Image Viewer","Orion Markdown Editor":"Markdown Editor","Orion Markdown Viewer":"Markdown Viewer","Orion JSON Editor":"JSON Editor","View on Site":"View on Site","View this file or folder on a web site hosted by Orion":"View this file or folder on a web site hosted by Orion.",ShowAllKeyBindings:"Show a list of all the keybindings on this page","Show Keys":"Show Keys",HideShowBannerFooter:"Hide or show the page banner","Toggle banner and footer":"Toggle banner",ChooseFileOpenEditor:"Choose a file by name and open an editor on it",FindFile:"Open File...","System Configuration Details":"System Configuration Details","System Config Tooltip":"Go to the System Configuration Details page","Background Operations":"Background Operations","Background Operations Tooltip":"Go to the Background Operations page","Operation status is unknown":"Operation status is unknown","Unknown item":"Unknown item",NoSearchAvailableErr:"Can't search: no search service is available",Related:"Related",Options:"Options","LOG: ":"LOG: ",View:"View",SplashTitle:"Setting up Workspace",SplashTitleSettings:"Loading Settings",SplashTitleGit:"Loading Git Repositories",LoadingPage:"Loading Page",LoadingPlugins:"Loading Plugins",LoadingResources:"Loading Resources",plugin_started:'"${0}" started',"plugin_lazy activation":'"${0}" lazily activated',plugin_starting:'"${0}" starting',"no parent":"no parent","no tree model":"no tree model","no renderer":"no renderer","could not find table row ":"could not find table row ",Operations:"Operations","Operations running":"Operations running",SomeOpWarning:"Some operations finished with warning",SomeOpErr:"Some operations finished with error","no service registry":"no service registry",Tasks:"Tasks",Close:"Close","Expand all":"Expand all","Collapse all":"Collapse all",Search:"Search","Advanced search":"Advanced search",Submit:"Submit",More:"More","Recent searches":"Recent searches","Regular expression":"Regular expression","Search options":"Search options","Global search":"Global search","Orion Home":"Home","Close notification":"Close notification",OpPressSpaceMsg:"Operations - Press spacebar to show current operations","Toggle side panel":"Toggle side panel","Open or close the side panel":"Open or close the side panel",Projects:"Projects","Toggle Sidebar":"Toggle Sidebar","Sample HTML5 Site":"Sample HTML5 Site","Generate an HTML5 'Hello World' website, including JavaScript, HTML, and CSS files.":"Generate an HTML5 'Hello World' website, including JavaScript, HTML, and CSS files.","Sample Orion Plugin":"Sample Orion Plug-in","Generate a sample plugin for integrating with Orion.":"Generate a sample plug-in for integrating with Orion.",Browser:"Web Browser",OutlineProgress:"Getting outline for ${0} from ${1}",outlineTimeout:"Outline service timed out. Try reloading the page and opening the outline again.",UnknownError:"An unknown error occurred.",Filter:"Filter (* = any string, ? = any character)",TemplateExplorerLabel:"Templates",OpenTemplateExplorer:"Open Template Explorer",Edit:"Edit",CentralNavTooltip:"Toggle Navigation Menu","Wrote: ${0}":"Wrote: ${0}",GenerateHTML:"Generate HTML file",GenerateHTMLTooltip:"Write an HTML file generated from the current Markdown editor content","alt text":"alt text",blockquote:"blockquote",code:"code","code (block)":"code (block)","code (span)":"code (span)",emphasis:"emphasis","fenced code (${0})":"fenced code (${0})","header (${0})":"header (${0})","horizontal rule":"horizontal rule",label:"label","link (auto)":"link (auto)","link (image)":"link (image)","link (inline)":"link (inline)","link label":"link label","link label (optional)":"link label (optional)","link (ref)":"link (ref)","list item (bullet)":"list item (bullet)","list item (numbered)":"list item (numbered)","strikethrough (${0})":"strikethrough (${0})",strong:"strong","table (${0})":"table (${0})",text:"text","title (optional)":"title (optional)",url:"url",workedProgress:"${0} (${1}/${2})",TogglePaneOrientationTooltip:"Toggle split pane orientation",WarningDuplicateLinkId:"Duplicate link ID: ${0} (link IDs are not case-sensitive)",WarningHeaderTooDeep:"Header level cannot exceed 6",WarningLinkHasNoText:"Link has no text",WarningLinkHasNoURL:"Link has no URL",WarningOrderedListItem:"Ordered list item within unordered list",WarningOrderedListShouldStartAt1:"The first item in an ordered list should have index 1",WarningUndefinedLinkId:"Undefined link ID: ${0}",WarningUnorderedListItem:"Unordered list item within ordered list",PageTitleFormat:"${0} - ${1}",KeyCTRL:"Ctrl",KeySHIFT:"Shift",KeyALT:"Alt",KeyBKSPC:"Backspace",KeyDEL:"Del",KeyEND:"End",KeyENTER:"Enter",KeyESCAPE:"Esc",KeyHOME:"Home",KeyINSERT:"Ins",KeyPAGEDOWN:"Page Down",KeyPAGEUP:"Page Up",KeySPACE:"Space",KeyTAB:"Tab","a year":"a year",years:"${0} years","a month":"a month",months:"${0} months","a day":"a day",days:"${0} days","an hour":"an hour",hours:"${0} hours","a minute":"a minute",minutes:"${0} minutes",timeAgo:"${0} ago",justNow:"just now",fixAll:"Fix all"}),define("orion/i18nUtil",[],function(){function e(e){var t=/\$\{([^\}]+)\}/g,n=arguments;return 2===n.length&&n[1]&&"object"==typeof n[1]?e.replace(t,function(e,t){return n[1][t]}):e.replace(t,function(e,t){return n[(t<<0)+1]})}return{formatMessage:e}}),define("orion/util",[],function(){function e(e){var t=arguments;return e.replace(/\$\{([^\}]+)\}/g,function(e,n){return t[(n<<0)+1]})}function t(e,t){return e.createElementNS?e.createElementNS(w,t):e.createElement(t)}function n(e,t){t.addEventListener("keydown",function(t){9!==t.keyCode||t.shiftKey||(t.preventDefault(),e.focus())}),e.addEventListener("keydown",function(e){9===e.keyCode&&e.shiftKey&&(e.preventDefault(),t.focus())})}var i=navigator.userAgent,o=-1!==i.indexOf("MSIE")||-1!==i.indexOf("Trident")?document.documentMode:void 0,r=parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0,s=-1!==i.indexOf("Opera")?parseFloat(i.split("Version/")[1]):void 0,a=parseFloat(i.split("Chrome/")[1])||void 0,l=-1!==i.indexOf("Safari")&&!a,d=parseFloat(i.split("WebKit/")[1])||void 0,c=-1!==i.indexOf("Android"),u=-1!==i.indexOf("iPad"),p=-1!==i.indexOf("iPhone"),h=u||p,f=-1!==i.indexOf("Electron"),g=-1!==navigator.platform.indexOf("Mac"),m=-1!==navigator.platform.indexOf("Win"),v=-1!==navigator.platform.indexOf("Linux"),y="undefined"!=typeof document&&"ontouchstart"in document.createElement("input"),E=m?"\r\n":"\n",w="http://www.w3.org/1999/xhtml";return{formatMessage:e,createElement:t,confineDialogTab:n,isIE:o,isFirefox:r,isOpera:s,isChrome:a,isSafari:l,isWebkit:d,isAndroid:c,isIPad:u,isIPhone:p,isIOS:h,isElectron:f,isMac:g,isWindows:m,isLinux:v,isTouch:y,platformDelimiter:E}}),define("orion/webui/littlelib",["orion/util"],function(e){function t(e,t){return t||(t=document),t.querySelector(e)}function n(e,t){return t||(t=document),t.querySelectorAll(e)}function i(e,t){return Array.prototype.slice.call(n(e,t))}function o(e){var t=e;return"string"==typeof e&&(t=document.getElementById(e)),t}function r(e,t){if(!e||!t)return!1;if(e===t)return!0;var n=e.compareDocumentPosition(t);return Boolean(16&n)}function s(e){var t=e.getBoundingClientRect(),n=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft),i=Math.max(document.documentElement.scrollTop,document.body.scrollTop);return{left:t.left+n,top:t.top+i,width:t.width,height:t.height}}function a(e){for(;e.hasChildNodes();){var t=e.firstChild;e.removeChild(t)}}function l(t){var n=t.tabIndex;if(0===n&&e.isIE){var i={a:!0,body:!0,button:!0,frame:!0,iframe:!0,img:!0,input:!0,isindex:!0,object:!0,select:!0,textarea:!0};i[t.nodeName.toLowerCase()]||t.attributes.tabIndex||(n=-1)}return n}function d(e){if(l(e)>=0)return e;if(e.hasChildNodes())for(var t=0;t<e.childNodes.length;t++){var n=d(e.childNodes[t]);if(n)return n}return null}function c(e){if(l(e)>=0)return e;if(e.hasChildNodes())for(var t=e.childNodes.length-1;t>=0;t--){var n=c(e.childNodes[t]);if(n)return n}return null}function u(e,t){if(3===e.nodeType){var n=b.exec(e.nodeValue);n&&n.length>1&&t(e,n)}if(e.hasChildNodes())for(var i=0;i<e.childNodes.length;i++)u(e.childNodes[i],t)}function p(e,t){if(!e||!t)return 0;var n=e.ownerDocument,i=n.defaultView||n.parentWindow;if(i.getComputedStyle){var o=i.getComputedStyle(e,null),r=o.getPropertyValue(t);if(r.length>2&&-1!==r.indexOf("px",r.length-2)){r=r.slice(0,-2);var s=parseInt(r,10);return s!==s?0:s}}return 0}function h(e,t){u(e,function(e,n){var i=t[n[1]]||n[1];e.parentNode.replaceChild(document.createTextNode(i),e)})}function f(e,t){u(e,function(e,n){var i=t[n[1]];if(i){var o=document.createRange(),r=n.index;o.setStart(e,r),o.setEnd(e,r+n[0].length),o.deleteContents(),o.insertNode(i)}})}function g(t,n){function i(e){L.forEach(function(t){var n=!1,i=t.excludeNodes.some(function(t){return document.body.contains(t)?(n=!0,t.contains(e.target)):!1});if(n&&!i)try{t.dismiss(e)}catch(o){"undefined"!=typeof console&&console&&console.error(o&&o.message)}}),L=L.filter(function(e){return e.excludeNodes.some(function(e){return document.body.contains(e)})})}null===L&&(L=[],document.addEventListener("click",i,!0),e.isIOS&&document.addEventListener("touchend",function(e){function t(){e.target.removeEventListener("click",t)}0===e.touches.length&&e.target.addEventListener("click",t)},!1)),L.push({excludeNodes:t,dismiss:n})}function m(e){L=L.filter(function(t){return e!==t.dismiss})}function v(e){for(var t=e.parentNode,n=document.documentElement;t&&t!==n;){var i=window.getComputedStyle(t,null);if(!i)break;var o=i.getPropertyValue("overflow-y");if("auto"===o||"scroll"===o)break;t=t.parentNode}return t}function y(e){window.document.all&&(e.keyCode=0),e.preventDefault&&(e.preventDefault(),e.stopPropagation())}function E(e){for(var t=document.getElementsByTagName("iframe"),n=0;n<t.length;n++)t[n].parentNode.style.pointerEvents=e?"":"none"}function w(e){return N[e]||null}function S(e,t){var n=t,i=null;return void 0===n&&(n=document.createElement("div")),n.innerHTML=e,i=n.children.length>1?n.children:n.firstChild}var b=/\$\{([^\}]+)\}/,L=null,T={BKSPC:8,TAB:9,ENTER:13,SHIFT:16,CONTROL:17,ALT:18,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DEL:46,COMMAND:991},N=Object.create(null);return Object.keys(T).forEach(function(e){N[T[e]]=e}),{$:t,$$:n,$$array:i,node:o,contains:r,bounds:s,empty:a,firstTabbable:d,lastTabbable:c,pixelValueOf:p,stop:y,processTextNodes:h,processDOMNodes:f,addAutoDismiss:g,setFramesEnabled:E,getOffsetParent:v,removeAutoDismiss:m,keyName:w,KEY:T,createNodes:S}}),define("text",["module"],function(e){"use strict";var t,n,i,o,r,s=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],a=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,d="undefined"!=typeof location&&location.href,c=d&&location.protocol&&location.protocol.replace(/\:/,""),u=d&&location.hostname,p=d&&(location.port||void 0),h={},f=e.config&&e.config()||{};return t={version:"2.0.12",strip:function(e){if(e){e=e.replace(a,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=s[t];try{e=new ActiveXObject(n)}catch(i){}if(e){s=[n];break}}return e},parseName:function(e){var t,n,i,o=!1,r=e.indexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==r&&(!s||r>1)?(t=e.substring(0,r),n=e.substring(r+1,e.length)):t=e,i=n||t,r=i.indexOf("!"),-1!==r&&(o="strip"===i.substring(r+1),i=i.substring(0,r),n?n=i:t=i),{moduleName:t,ext:n,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,i,o){var r,s,a,l=t.xdRegExp.exec(e);return l?(r=l[2],s=l[3],s=s.split(":"),a=s[1],s=s[0],!(r&&r!==n||s&&s.toLowerCase()!==i.toLowerCase()||(a||s)&&a!==o)):!0},finishLoad:function(e,n,i,o){i=n?t.strip(i):i,f.isBuild&&(h[e]=i),o(i)},load:function(e,n,i,o){if(o&&o.isBuild&&!o.inlineText)return void i();f.isBuild=o&&o.isBuild;var r=t.parseName(e),s=r.moduleName+(r.ext?"."+r.ext:""),a=n.toUrl(s),l=f.useXhr||t.useXhr;return 0===a.indexOf("empty:")?void i():void(!d||l(a,c,u,p)?t.get(a,function(n){t.finishLoad(e,r.strip,n,i)},function(e){i.error&&i.error(e)}):n([s],function(e){t.finishLoad(r.moduleName+"."+r.ext,r.strip,e,i)}))},write:function(e,n,i){if(h.hasOwnProperty(n)){var o=t.jsEscape(h[n]);i.asModule(e+"!"+n,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,n,i,o,r){var s=t.parseName(n),a=s.ext?"."+s.ext:"",l=s.moduleName+a,d=i.toUrl(s.moduleName+a)+".js";t.load(l,i,function(){var n=function(e){return o(d,e)};n.asModule=function(e,t){return o.asModule(e,d,t)},t.write(e,l,n,r)},r)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,i){try{var o=n.readFileSync(e,"utf8");0===o.indexOf("﻿")&&(o=o.substring(1)),t(o)}catch(r){i&&i(r)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,n,i,o){var r,s=t.createXhr();if(s.open("GET",e,!0),o)for(r in o)o.hasOwnProperty(r)&&s.setRequestHeader(r.toLowerCase(),o[r]);f.onXhr&&f.onXhr(s,e),s.onreadystatechange=function(){var t,o;4===s.readyState&&(t=s.status||0,t>399&&600>t?(o=new Error(e+" HTTP status: "+t),o.xhr=s,i&&i(o)):n(s.responseText),f.onXhrComplete&&f.onXhrComplete(s,e))},s.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,i,o="utf-8",r=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),o)),l="";try{for(n=new java.lang.StringBuffer,i=a.readLine(),i&&i.length()&&65279===i.charAt(0)&&(i=i.substring(1)),null!==i&&n.append(i);null!==(i=a.readLine());)n.append(s),n.append(i);l=String(n.toString())}finally{a.close()}t(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(i=Components.classes,o=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in i,t.get=function(e,t){var n,s,a,l={};r&&(e=e.replace(/\//g,"\\")),a=new FileUtils.File(e);try{n=i["@mozilla.org/network/file-input-stream;1"].createInstance(o.nsIFileInputStream),n.init(a,1,0,!1),s=i["@mozilla.org/intl/converter-input-stream;1"].createInstance(o.nsIConverterInputStream),s.init(n,"utf-8",n.available(),o.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),s.readString(n.available(),l),s.close(),n.close(),t(l.value)}catch(d){throw new Error((a&&a.path||"")+": "+d)}}),t}),define("text!orion/banner/banner.html",[],function(){return'<header id="banner" role="banner" class="headerLayout">\n	<nav id=\'navbar\'></nav>\n	<div id="notificationArea" class="notificationHide">\n		<div class="notifications" id="notifications" aria-live="assertive" aria-atomic="true"></div>\n		<div class="layoutRight"><button type="button" aria-label="Close" class="dismissButton layoutRight core-sprite-close imageSprite" id="closeNotifications"></span></div>\n	</div>\n</header>\n'}),define("orion/banner/banner",["i18n!orion/nls/messages","orion/webui/littlelib","text!orion/banner/banner.html"],function(e,t,n){function i(){}return i.prototype.create=function(i){if(!document.getElementById("banner")){var o=document.createRange();o.selectNode(i);var r=o.createContextualFragment(n);t.processTextNodes(r,e),i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r)}},i}),define("orion/splash",["module","i18n!orion/nls/messages","orion/i18nUtil","orion/banner/banner"],function(e,t,n,i){function o(e,t,n,i){this.TYPE_FILLER=0,this.TYPE_DRIVEN=1,this.type=n,this.id=e,this.description=t,this.total=i,this.worked=0,this.WAITING=0,this.HAPPENING=1,this.COMPLETED=2,this.state=this.WAITING,this.template="",this.domNode}function r(e){window.performance&&window.performance.mark&&window.performance.mark("orion-"+e)}function s(e,t){this.domNode=e,this.content,this.title=t,this.steps=[],this.FILLER_TIMEOUT=200,window.performance&&window.performance.now&&(this.FILLER_TIMEOUT=window.performance.now()/7),this.template='<div class="splashLoader"><div class="splashAbout">'+this.title+'</div><div class="splashProgressbar"><progress id ="progressbar"></progress></div><div id="steps" class="splashSteps"></div><div id="stepMessages" class="splashMessages"></div></div></div>',this.initialize(),this.interval,this.currentStep=-1}function a(){(new i).create(document.body);var n=document.getElementById("splash");if(n){var r=document.createElement("div"),a=500;if(localStorage.showSplashTimeout)try{a=parseInt(localStorage.showSplashTimeout,10)}catch(d){}0!==a&&(r.style.display="none",setTimeout(function(){r.style.display=""},a)),r.id=r.className="splashContainer",n.appendChild(r);var c=e.config();l=new s("splashContainer",t["SplashTitle"+(c.splashID||"")]);var u=new o("orion.splash.page",t.LoadingPage,0,50);l.addStep(u),l.splash=n;var p;p=new o("orion.splash.plugins",t.LoadingPlugins,0,20),l.addStep(p),p=new o("orion.splash.resources",t.LoadingResources,0,30),l.addStep(p),l.nextStep()}}var l;return o.prototype.complete=function(){r("end splash step "+this.id),this.state=this.COMPLETED,this.domNode.className="splashSuccessImage"},o.prototype.spin=function(){r("start splash step "+this.id),this.state=this.HAPPENING,this.domNode.className="splashLoadingImage"},o.prototype.getStepNode=function(){var e=document.createElement("div");return e.className="splashStep",e.innerHTML='<div class="splashVisual"><div id="step'+this.order+'"></div></div><div class="splashVerbal">'+this.description+"</div>",this.domNode=e.firstChild.firstChild,this.state===this.HAPPENING?this.domNode.className="splashLoadingImage":this.state===this.COMPLETED&&(this.domNode.className="splashSuccessImage"),e},o.prototype.transition=function(){switch(this.state){case this.WAITING:this.state=this.HAPPENING;break;case this.HAPPENING:this.state=this.COMPLETED}},s.prototype.showFillerProgress=function(){var e=this.getStep();if(!e)return void this.stopFillerProgress();var t=(e.total-e.worked)/10;e.worked=Math.min(e.worked+t,e.total),this.update()},s.prototype.startFillerProgress=function(){var e=this.getStep();e&&e.type===e.TYPE_FILLER&&(this.interval=setInterval(function(){this.showFillerProgress()}.bind(this),this.FILLER_TIMEOUT))},s.prototype.stopFillerProgress=function(){this.interval&&(clearInterval(this.interval),delete this.interval)},s.prototype.nextStep=function(){var e;if(this.currentStep>=0)switch(e=this.getStep(),e.type){case e.TYPE_FILLER:this.stopFillerProgress(),e.complete();break;case e.TYPE_DRIVEN:e.complete()}if(this.currentStep=this.currentStep+1,2===this.currentStep&&this.splash.classList.add("splashSeeThrough"),e=this.getStep()){switch(e.type){case e.TYPE_FILLER:this.startFillerProgress(),e.spin();break;case e.TYPE_DRIVEN:e.spin()}this.update()}},s.prototype.initialize=function(){this.content=document.getElementById(this.domNode),this.content.innerHTML=this.template,this.splashProgress=document.getElementById("progressbar"),this.stepMessages=document.getElementById("stepMessages"),this.splashProgress.value=0},s.prototype.emptySteps=function(){for(var e=document.getElementById("steps");e.firstChild;)e.removeChild(e.firstChild)},s.prototype.getStep=function(e){if(!e)return this.steps[this.currentStep];for(var t=0;t<this.steps.length;t++)if(this.steps[t].id===e)return this.steps[t];return null},s.prototype.drawSteps=function(){this.emptySteps();var e=document.getElementById("steps");for(var t in this.steps){var n=this.steps[t];e.appendChild(n.getStepNode())}},s.prototype.addStep=function(e,t){e.order=this.steps.length,this.steps.splice(t||this.steps.length,0,e),this.drawSteps(),this.update()},s.prototype.worked=function(e){var t=this.getStep();t.worked=t.worked+(e||1),t.worked===t.total?this.nextStep():this.update()},s.prototype.update=function(){var e=this.getStep();if(e){var t,n=0;for(t=0;t<e.order;t++)n+=this.steps[t].total;var i=n;for(n+=e.worked;t<this.steps.length;t++)i+=this.steps[t].total;this.stepMessages.innerHTML="";var o=e.message||"",r=e.detailedMessage||"";Array.isArray(o)||(o=[o]),Array.isArray(r)||(r=[r]),o.forEach(function(e,t){if(e){var n=document.createElement("div");n.className="splashMessage",n.textContent=e,this.stepMessages.appendChild(n),n=document.createElement("div"),n.className="splashDetailedMessage",n.textContent=(e!==r[t]?r[t]:null)||" ",this.stepMessages.appendChild(n)}}.bind(this));var s=this.splashProgress;s&&(s.max=i,s.value=n)}},s.prototype.takeDown=function(){if(l){this.pluginRegistry&&(this.pluginRegistry.removeEventListener("started",this._pluginListener),this.pluginRegistry.removeEventListener("lazy activation",this._pluginListener),this.pluginRegistry.removeEventListener("starting",this._pluginListener)),this.nextStep();var e=document.getElementById("splash");e&&e.parentNode&&e.parentNode.removeChild(e),l=null}},s.prototype.createStep=function(e,t,n,i){return new o(e,t,n,i)},s.prototype.setPluginRegistry=function(e){this.pluginRegistry=e;var i=this._pluginListener=function(e){var i=this.getStep();if(i&&"orion.splash.plugins"===i.id){var o=e.plugin.getName();o&&(i.message=n.formatMessage(t["plugin_"+e.type],o),this.update())}}.bind(this);e.addEventListener("started",i),e.addEventListener("lazy activation",i),e.addEventListener("starting",i)},a(),{getPageLoader:function(){return l}}});
//# sourceMappingURL=splash.js
//# sourceMappingURL=splash.js.map