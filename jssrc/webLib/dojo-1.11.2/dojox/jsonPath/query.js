//>>built
define("dojox/jsonPath/query",["dojo/_base/kernel","dojo/_base/lang"],function(n,v){var m=function(p,m,e){e||(e={});var r=[],n=function(a){return r[a]}.name;if("PATH"==e.resultType&&"RESULT"==e.evalType)throw Error("RESULT based evaluation not supported with PATH based results");var d={resultType:e.resultType||"VALUE",normalize:function(a){var b=[];a=a.replace(/'([^']|'')*'/g,function(a){return n+"("+(r.push(eval(a))-1)+")"});for(var c=-1;c!=b.length;)c=b.length,a=a.replace(/(\??\([^\(\)]*\))/g,function(a){return"#"+
(b.push(a)-1)});a=a.replace(/[\['](#[0-9]+)[\]']/g,"[$1]").replace(/'?\.'?|\['?/g,";").replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"");for(c=-1;c!=a;)c=a,a=a.replace(/#([0-9]+)/g,function(a,c){return b[c]});return a.split(";")},asPaths:function(a){var b,c,f,d,e;for(c=0;c<a.length;c++){f="$";d=a[c];b=1;for(e=d.length;b<e;b++)f+=/^[0-9*]+$/.test(d[b])?"["+d[b]+"]":"['"+d[b]+"']";a[c]=f}return a},exec:function(a,b,c){function f(a,l,c){a&&(a.hasOwnProperty(l)&&"VALUE"!=d.resultType)&&g.push(h.concat([l]));
c?k=a[l]:a&&a.hasOwnProperty(l)&&k.push(a[l])}function e(a){k.push(a);g.push(h);d.walk(a,function(c){if("object"===typeof a[c]){var b=h;h=h.concat(c);e(a[c]);h=b}})}function m(a,c){if(c instanceof Array){var b=c.length,d=0,e=b,s=1;a.replace(/^(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)$/g,function(a,c,b,l){d=parseInt(c||d,10);e=parseInt(b||e,10);s=parseInt(l||s,10)});d=0>d?Math.max(0,d+b):Math.min(b,d);e=0>e?Math.max(0,e+b):Math.min(b,e);for(b=d;b<e;b+=s)f(c,b)}}function n(a,c){var b=c.match(/^_str\(([0-9]+)\)$/);
return b?r[b[1]]:a}function p(a,b){if(/^\(.*?\)$/.test(b))f(a,d.eval(b,a),c);else if("*"===b)d.walk(a,c&&a instanceof Array?function(b){d.walk(a[b],function(c){f(a[b],c)})}:function(b){f(a,b)});else if(".."===b)e(a);else if(/,/.test(b)){var g,h,k;g=b.split(/'?,'?/);k=0;for(h=g.length;k<h;k++)f(a,n(g[k],b))}else/^\?\(.*?\)$/.test(b)?d.walk(a,function(c){d.eval(b.replace(/^\?\((.*?)\)$/,"$1"),a[c])&&f(a,c)}):/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(b)?m(b,a):(b=n(b,b),c&&a instanceof Array&&!/^[0-9*]+$/.test(b)?
d.walk(a,function(c){f(a[c],b)}):f(a,b,c))}for(var h=["$"],k=c?b:[b],g=[h],t,u;a.length;){t=a.shift();if(null===(b=k)||void 0===b)return b;k=[];u=g;g=[];c?p(b,t):d.walk(b,function(a){h=u[a]||h;p(b[a],t)})}if("BOTH"==d.resultType){g=d.asPaths(g);a=[];var q;for(q=0;q<g.length;q++)a.push({path:g[q],value:k[q]});return a}return"PATH"==d.resultType?d.asPaths(g):k},walk:function(a,b){var c,d;if(a instanceof Array){c=0;for(d=a.length;c<d;c++)c in a&&b(c)}else if("object"===typeof a)for(c in a)a.hasOwnProperty(c)&&
b(c)},eval:function(a,b){try{return p&&b&&eval(a.replace(/@/g,"v"))}catch(c){throw new SyntaxError("jsonPath: "+c.message+": "+a.replace(/@/g,"v").replace(/\^/g,"_a"));}}};return m&&p?d.exec(d.normalize(m).slice(1),p,"RESULT"==e.evalType):!1};n.isAsync||(v.getObject("dojox.jsonPath",!0).query=m);return m});
/// query.js.map