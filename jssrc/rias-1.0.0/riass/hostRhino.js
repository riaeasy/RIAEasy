var _typeStr=_typeString="s",_typeNum=_typeNumber="n",_typeBool=_typeBoolean="b",_typeObj=_typeObject="o",_typeArray="a";define(["rias"],function(c){function h(a){var b=Array.prototype.slice.call(arguments);return b=b.join(" ")}var d=com.riastudio.util.SysUtil,p=com.riastudio.util.WebUtil,m=com.riastudio.util.FileUtil,n=com.riastudio.util.DbUtil;console||(console={log:function(a){c.log(1,"console",h.apply(this,arguments))},debug:function(a){c.log(0,"console",h.apply(this,arguments))},info:function(a){c.log(1,"console",h.apply(this,arguments))},warn:function(a){c.log(2,"console",h.apply(this,arguments))},error:function(a){c.log(3,"console",h.apply(this,arguments))}});c.host={jsString:function(a){return String(a)},jsNumber:function(a){return Number(c.host.jsString(a))},jsBoolean:function(a){return"false"!=a&&!!a},jsArray:function(a){for(var b=0,c=a&&a.size()||0,e=[];b<c;++b)e.push(a.get(b));return e},jsType:function(a,b){switch(b){case _typeStr:return c.host.jsString(a);case _typeNum:return c.host.jsNumber(a);case _typeBool:return c.host.jsBoolean(a);case _typeArray:return c.host.jsArray(a);default:return a}},newThread:function(a){return new java.lang.Thread(a)},currentThread:function(){return java.lang.Thread.currentThread()},newString:function(a){return new java.lang.String(a)},newFile:function(a,b){return b?new java.io.File(a,b):new java.io.File(a)},getFilePathName:function(a){return c.host.jsString(a.getCanonicalPath()).replace(/\\/g,"/")},getFileExt:function(a){a=c.host.getFilePathName(a);var b=a.lastIndexOf(".");return-1<b?a.substring(b+1):""},fileSize:function(a){return a.length()},fileLastModified:function(a){return a.lastModified()},fileExists:function(a){return a.exists()},isFile:function(a){return a.isFile()},isDirectory:function(a){return a.isDirectory()},createNewFile:function(a){return a.createNewFile()},createNewDir:function(a){return a.mkdirs()},deleteFile:function(a){return a["delete"]()},copyFile:function(a,b,c,e){try{return m.copyFile(a,b,!!c,!!e),1}catch(d){return 0}},readText:function(a,b){c.isString(a)&&(a=new java.io.File(a));return c.host.jsString(m.readText(a,b||"utf-8"))},writeText:function(a,b,d){c.isString(a)&&(a=new java.io.File(a));try{return m.writeText(a,b,d||"utf-8"),1}catch(e){return 0}},listFiles:function(a){return a.listFiles()},sortFiles:function(a,b,d){function e(a,b){var f,g,d,e;switch(h){case "size":case 1:return f=a.isDirectory()?-1:a.length(),g=b.isDirectory()?-1:b.length(),k?g.compareTo(f):f.compareTo(g);case "type":case 2:return f=l.getCollationKey(a.isDirectory()?"0":"1"+c.host.getFileExt(a).toLowerCase()),g=l.getCollationKey(b.isDirectory()?"0":"1"+c.host.getFileExt(b).toLowerCase()),k?g.compareTo(f):f.compareTo(g);case "lastModified":case 3:return f=a.lastModified(),g=b.lastModified(),d=a.isDirectory(),e=b.isDirectory(),d&&!e&&(f=Number.MIN_VALUE),e&&!d&&(g=Number.MIN_VALUE),k?g.compareTo(f):f.compareTo(g);default:return f=l.getCollationKey((a.isDirectory()?0:1)+a.getName().toLowerCase()),g=l.getCollationKey((b.isDirectory()?0:1)+b.getName().toLowerCase()),k?g.compareTo(f):f.compareTo(g)}}var h=b||-1,k=d||0,l=java.text.Collator.getInstance();a&&a.sort(e)},debugLevel:function(){return d.debugLevel},toBuff:function(a,b){return b?d.toBuff(a,b):d.toBuff(a)},newBuff:function(a){return d.newBuff(a)},newCache:function(){return d.newCache()},inputToOutput:function(a,b){return d.isToOs(a,b)},readStream:function(a){return c.host.jsString(d.readString(a))},db:{initConnection:function(a,b){return n.initConnection(c.toStr(a),b)},getField:function(a,b,d,e,h){return n.getObject(a,c.toInt(b),c.toInt(d),!!e,!!h)},toJSONArray:function(a,b){return n.toJSONArray(a,c.toInt(b))}},toExcel:function(a,b,c){return p.toExcel(a,b,c)}};return c});