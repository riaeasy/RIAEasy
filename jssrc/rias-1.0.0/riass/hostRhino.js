define(["rias"],function(c){function g(a){a=c.concat([],a);return a=a.join(",\n")}console=c.mixin(console,{log:function(a){c.log(1,"console",g(arguments))},debug:function(a){c.log(0,"console",g(arguments))},message:function(a){c.log(1,"console",g(arguments))},info:function(a){c.log(1,"console",g(arguments))},warn:function(a){c.log(2,"console",g(arguments))},error:function(a){c.log(3,"console",g(arguments))}});var b=javax.servlet.http.HttpServletResponse;c.host={_typeStr:"s",_typeString:"s",_typeNum:"n",_typeNumber:"n",_typeBool:"b",_typeBoolean:"b",_typeObj:"o",_typeObject:"o",_typeArray:"a",SysUtil:com.riastudio.util.SysUtil,WebUtil:com.riastudio.util.WebUtil,FileUtil:com.riastudio.util.FileUtil,DbUtil:com.riastudio.util.DbUtil,ServerEnv:com.riastudio.server.ServerEnv,OperInfo:com.riastudio.server.OperInfo,responseCode:{SC_CONTINUE:b.SC_CONTINUE,SC_SWITCHING_PROTOCOLS:b.SC_SWITCHING_PROTOCOLS,SC_OK:b.SC_OK,SC_CREATED:b.SC_CREATED,SC_ACCEPTED:b.SC_ACCEPTED,SC_NON_AUTHORITATIVE_INFORMATION:b.SC_NON_AUTHORITATIVE_INFORMATION,SC_NO_CONTENT:b.SC_NO_CONTENT,SC_RESET_CONTENT:b.SC_RESET_CONTENT,SC_PARTIAL_CONTENT:b.SC_PARTIAL_CONTENT,SC_MULTIPLE_CHOICES:b.SC_MULTIPLE_CHOICES,SC_MOVED_PERMANENTLY:b.SC_MOVED_PERMANENTLY,SC_MOVED_TEMPORARILY:b.SC_MOVED_TEMPORARILY,SC_FOUND:b.SC_FOUND,SC_SEE_OTHER:b.SC_SEE_OTHER,SC_NOT_MODIFIED:b.SC_NOT_MODIFIED,SC_USE_PROXY:b.SC_USE_PROXY,SC_TEMPORARY_REDIRECT:b.SC_TEMPORARY_REDIRECT,SC_BAD_REQUEST:b.SC_BAD_REQUEST,SC_UNAUTHORIZED:b.SC_UNAUTHORIZED,SC_PAYMENT_REQUIRED:b.SC_PAYMENT_REQUIRED,SC_FORBIDDEN:b.SC_FORBIDDEN,SC_NOT_FOUND:b.SC_NOT_FOUND,SC_METHOD_NOT_ALLOWED:b.SC_METHOD_NOT_ALLOWED,SC_NOT_ACCEPTABLE:b.SC_NOT_ACCEPTABLE,SC_PROXY_AUTHENTICATION_REQUIRED:b.SC_PROXY_AUTHENTICATION_REQUIRED,SC_REQUEST_TIMEOUT:b.SC_REQUEST_TIMEOUT,SC_CONFLICT:b.SC_CONFLICT,SC_GONE:b.SC_GONE,SC_LENGTH_REQUIRED:b.SC_LENGTH_REQUIRED,SC_PRECONDITION_FAILED:b.SC_PRECONDITION_FAILED,SC_REQUEST_ENTITY_TOO_LARGE:b.SC_REQUEST_ENTITY_TOO_LARGE,SC_REQUEST_URI_TOO_LONG:b.SC_REQUEST_URI_TOO_LONG,SC_UNSUPPORTED_MEDIA_TYPE:b.SC_UNSUPPORTED_MEDIA_TYPE,SC_REQUESTED_RANGE_NOT_SATISFIABLE:b.SC_REQUESTED_RANGE_NOT_SATISFIABLE,SC_EXPECTATION_FAILED:b.SC_EXPECTATION_FAILED,SC_INTERNAL_SERVER_ERROR:b.SC_INTERNAL_SERVER_ERROR,SC_NOT_IMPLEMENTED:b.SC_NOT_IMPLEMENTED,SC_BAD_GATEWAY:b.SC_BAD_GATEWAY,SC_SERVICE_UNAVAILABLE:b.SC_SERVICE_UNAVAILABLE,SC_GATEWAY_TIMEOUT:b.SC_GATEWAY_TIMEOUT,SC_HTTP_VERSION_NOT_SUPPORTED:b.SC_HTTP_VERSION_NOT_SUPPORTED},jsString:function(a){return String(a)},jsNumber:function(a){return Number(c.host.jsString(a))},jsBoolean:function(a){return"false"!=a&&!!a},jsArray:function(a){for(var c=0,b=a&&a.size()||0,h=[];c<b;++c)h.push(a.get(c));return h},jsType:function(a,b){switch(b){case c.host._typeStr:return c.host.jsString(a);case c.host._typeNum:return c.host.jsNumber(a);case c.host._typeBool:return c.host.jsBoolean(a);case c.host._typeArray:return c.host.jsArray(a);default:return a}},newThread:function(a){return new java.lang.Thread(a)},currentThread:function(){return java.lang.Thread.currentThread()},newString:function(a){return new java.lang.String(a)},newFile:function(a,c){return c?new java.io.File(a,c):new java.io.File(a)},getFilePathName:function(a){return c.host.jsString(a.getCanonicalPath()).replace(/\\/g,"/")},getFileExt:function(a){a=c.host.getFilePathName(a);var b=a.lastIndexOf(".");return-1<b?a.substring(b+1):""},fileSize:function(a){return a.length()},fileLastModified:function(a){return a.lastModified()},fileExists:function(a){return a.exists()},isFile:function(a){return a.isFile()},isDirectory:function(a){return a.isDirectory()},createNewFile:function(a){return a.createNewFile()},createNewDir:function(a){return a.mkdirs()},deleteFile:function(a){return a["delete"]()},copyFile:function(a,b,d,h){try{return c.host.FileUtil.copyFile(a,b,!!d,!!h),1}catch(g){return 0}},readText:function(a,b){c.isString(a)&&(a=new java.io.File(a));return c.host.jsString(c.host.FileUtil.readText(a,b||"utf-8"))},writeText:function(a,b,d){c.isString(a)&&(a=new java.io.File(a));try{return c.host.FileUtil.writeText(a,b,d||"utf-8"),1}catch(h){return 0}},listFiles:function(a){return a.listFiles()},sortFiles:function(a,b,d){function h(a,b){var e,f,m,d;switch(g){case "size":case 1:return e=a.isDirectory()?-1:a.length(),f=b.isDirectory()?-1:b.length(),k?f.compareTo(e):e.compareTo(f);case "type":case 2:return e=l.getCollationKey(a.isDirectory()?"0":"1"+c.host.getFileExt(a).toLowerCase()),f=l.getCollationKey(b.isDirectory()?"0":"1"+c.host.getFileExt(b).toLowerCase()),k?f.compareTo(e):e.compareTo(f);case "lastModified":case 3:return e=a.lastModified(),f=b.lastModified(),m=a.isDirectory(),d=b.isDirectory(),m&&!d&&(e=Number.MIN_VALUE),d&&!m&&(f=Number.MIN_VALUE),k?f.compareTo(e):e.compareTo(f);default:return e=l.getCollationKey((a.isDirectory()?0:1)+a.getName().toLowerCase()),f=l.getCollationKey((b.isDirectory()?0:1)+b.getName().toLowerCase()),k?f.compareTo(e):e.compareTo(f)}}var g=b||-1,k=d||0,l=java.text.Collator.getInstance();a&&a.sort(h)},debugLevel:function(){return c.host.SysUtil.debugLevel},toBuff:function(a,b){return b?c.host.SysUtil.toBuff(a,b):c.host.SysUtil.toBuff(a)},newBuff:function(a){return c.host.SysUtil.newBuff(a)},newCache:function(){return c.host.SysUtil.newCache()},inputToOutput:function(a,b){return c.host.SysUtil.isToOs(a,b)},readStream:function(a){return c.host.jsString(c.host.SysUtil.readString(a))},isRequest:function(a){return a instanceof javax.servlet.http.HttpServletRequest},getRemoteIp:function(a){return c.host.isRequest(a)?c.host.WebUtil.getRemoteIp(a,!1):"0"},db:{initConnection:function(a,b){return c.host.DbUtil.initConnection(c.toStr(a),b)},getField:function(a,b,d,g,n){return c.host.DbUtil.getObject(a,c.toInt(b),c.toInt(d),!!g,!!n)},toJSONArray:function(a,b){return c.host.DbUtil.toJSONArray(a,c.toInt(b))}},toExcel:function(a,b,d){return c.host.WebUtil.toExcel(a,b,d)}};return c});