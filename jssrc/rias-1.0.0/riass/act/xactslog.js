define(["rias"],function(g){return function(a,c,d){function f(a){e=b.defaultDb.updateRecord({table:"xoper",sets:b.getParameters(a),_idDirty:b.getConditionSrv(0,a,"_idDirty").split(","),where:[]})}var b=this,e={success:!1,value:""};"GET"===a||"TOEXCEL"===a?(a={select:"r.*",from:"xoper r",where:[],orderby:"",limit:""},(d=b.getConditionSrv(0,c,"id"))?a.where.push({logic:"and",condition:b.getEqualStrSrv(0,"r.id",d)}):(d=b.getConditionSrv(0,c,"parentId"))?a.where.push({logic:"and",condition:b.getEqualStrSrv(0,"r.idp",d)}):(d=b.getConditionSrv(0,c,"code"))?a.where.push({logic:"and",condition:b.getEqualStrSrv(0,"r.code",d)}):(b.getLimitSrv(0,c,a),(d=b.getConditionSrv(0,c,"idq"))&&a.where.push({logic:"and",condition:b.getLikeStrSrv(0,"r.id",d)}),(d=b.getConditionSrv(0,c,"typ"))&&a.where.push({logic:"and",condition:b.getLikeStrSrv(0,"r.typ",d)}),(d=b.getConditionSrv(0,c,"text"))&&a.where.push({logic:"and",condition:b.getLikeStrSrv(0,"r.text",d)})),(d=b.getConditionSrv(0,c,"_initData"))?a.select="r.id, r.code, r.text, r.typ":0===a.where.length&&""===a.limit&&a.where.push({logic:"and",condition:"0 \x3d 1"}),a.where.push({logic:"and",condition:"id \x3c\x3e -1"}),a.defaultSort="id",b.getOrderBySrv(0,c,a),e=b.defaultDb.queryPage(a)):"PUT"===a?f(c):"POST"===a?b.getConditionSrv(0,c,"_idDirty")?f(c):e=b.defaultDb.insertRecord({table:"xoper",values:b.getParameters(c),where:[]}):"DELETE"===a&&(e=b.defaultDb.deleteRecord({table:"xoper",_idDirty:b.getConditionSrv(0,c,"_idDirty").split(","),where:[]}));return e}});